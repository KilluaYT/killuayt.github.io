(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"+3o9":function(t,e){window.InputHandler=function(){function t(){}return t.CANCEL="cancel",t.SUBMIT="submit",t.KEY_ENTER=13,t.KEY_ESC=27,t.textarea=function(e){return function(n){var r;return n.keyCode===t.KEY_ESC?r=t.CANCEL:n.keyCode===t.KEY_ENTER&&!n.shiftKey&&osuCore.windowSize.isDesktop&&(n.preventDefault(),r=t.SUBMIT),"function"==typeof e?e(r,n):void 0}},t}()},"+CAb":function(t,e,n){"use strict";var r=n("0h6b"),i=n("lv9K"),s=n("KUml"),o=n("JlDh"),a=n("h/Ip"),u=n("6QPw"),l=n("FiYg"),c=n("9zVE"),h=n("f4vq"),d=n("/G9H"),p=n("Ncbg"),f=n("tX/w"),m=n("KMrT"),g=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let v=class extends d.Component{constructor(t){var e;super(t),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{hasError:!1}}),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:new l.a(h.a.dataStore.notificationStore,{excludes:this.props.excludes,isWidget:!0},null!==(e=this.props.only)&&void 0!==e?e:null)}),Object.defineProperty(this,"typeNames",{enumerable:!0,configurable:!0,writable:!0,value:o.c.filter(t=>!this.props.excludes.includes(t))}),Object.defineProperty(this,"handleFilterClick",{enumerable:!0,configurable:!0,writable:!0,value:t=>{var e;const n=null!==(e=t.currentTarget.dataset.type)&&void 0!==e?e:null;this.controller.navigateTo(n)}}),Object.defineProperty(this,"handleMarkAsRead",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.controller.markCurrentTypeAsRead()}}),Object.defineProperty(this,"handleShowMore",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.controller.loadMore()}}),Object.defineProperty(this,"renderFilter",{enumerable:!0,configurable:!0,writable:!0,value:t=>{const e=this.controller.getType(t.type),n=t.type===this.controller.currentFilter;if(null!==e.name&&e.isEmpty&&!n)return null;const r={"data-type":t.type},i=n?["active"]:[];return d.createElement("button",Object.assign({key:t.title,className:Object(f.a)("notification-popup__filter",i),onClick:this.handleFilterClick},r),d.createElement("span",{className:"notification-popup__filter-count"},this.controller.getTotal(e)),d.createElement("span",null,t.title))}}),Object(i.p)(this)}get links(){return this.typeNames.map(t=>({title:osu.trans(`notifications.filters.${null!=t?t:"_"}`),type:t}))}static getDerivedStateFromError(t){return console.error(t),{hasError:!0}}render(){var t;const e=`notification-popup u-fancy-scrollbar ${null!==(t=this.props.extraClasses)&&void 0!==t?t:""}`;return d.createElement(a.a.Provider,{value:{excludes:this.props.excludes,isWidget:!0}},d.createElement("div",{className:e},d.createElement("div",{className:"notification-popup__scroll-container"},this.renderFilters(),d.createElement("div",{className:"notification-popup__buttons"},this.renderHistoryLink(),d.createElement("div",{className:"notification-popup__clear-button"},this.renderMarkAsReadButton())),this.renderLegacyPm(),d.createElement("div",{className:"notification-stacks"},this.renderStacks(),this.renderShowMore()))))}renderFilters(){return null==this.props.only&&h.a.notificationsWorker.hasData?d.createElement("div",{className:"notification-popup__filters"},this.links.map(this.renderFilter)):null}renderHistoryLink(){var t;const e="channel"===this.props.only?"chat.index":"notifications.index";return d.createElement("a",{className:"notification-popup__filter",href:Object(r.route)(e)},osu.trans(`notifications.see_${null!==(t=this.props.only)&&void 0!==t?t:"all"}`))}renderLegacyPm(){if(null==this.controller.currentFilter)return d.createElement(u.a,null)}renderMarkAsReadButton(){var t;const e=this.controller.type;return e.isEmpty?null:d.createElement(c.a,{isMarkingAsRead:e.isMarkingAsRead,onMarkAsRead:this.handleMarkAsRead,text:osu.trans("notifications.mark_read",{type:osu.trans(`notifications.filters.${null!==(t=e.name)&&void 0!==t?t:"_"}`)})})}renderShowMore(){const t=this.controller.type;return d.createElement(p.a,{callback:this.handleShowMore,hasMore:null==t?void 0:t.hasMore,loading:null==t?void 0:t.isLoading,modifiers:["notification-group","notification-list"]})}renderStacks(){if(this.state.hasError)return;const t=this.controller.stacks.map(t=>d.createElement(m.a,{key:t.id,stack:t}));if(0===t.length){let t="notifications.loading";return h.a.notificationsWorker.hasData?t=null==this.controller.currentFilter?"notifications.all_read":"notifications.none":h.a.notificationsWorker.waitingVerification&&(t="notifications.verifying"),d.createElement("p",{key:"empty",className:"notification-popup__empty"},osu.trans(t))}return t}};Object.defineProperty(v,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{excludes:[]}}),g([i.h],v.prototype,"links",null),v=g([s.b],v),e.a=v},0:function(t,e,n){n("zzf1"),t.exports=n("q7GS")},"0vL2":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var r=n("0h6b"),i=n("f4vq"),s=n("Ma8u"),o=function(){function e(){}return e.promiseInit=function(t){return Promise.all([e.fetchToken(t),e.fetchScript()]).then((function(n){var r,i;return i=n[0],r=e.optionsWithToken(i),e.onXsollaReady(t),XPayStationWidget.init(r)}))},e.fetchScript=function(){var t;return null!=(t=i.a.turbolinksReload.load("https://static.xsolla.com/embed/paystation/1.0.7/widget.min.js"))?t:Promise.resolve()},e.fetchToken=function(e){return new Promise((function(n,i){return t.post(Object(r.route)("payments.xsolla.token"),{orderNumber:e}).done((function(t){return 32!==t.length?i({message:"wrong token length"}):n(t)})).fail((function(t){return i({xhr:t})}))}))},e.optionsWithToken=function(t){return{access_token:t,sandbox:!1}},e.onXsollaReady=function(t){var e;return e=!1,XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS_DONE,(function(){return e=!0})),XPayStationWidget.on(XPayStationWidget.eventTypes.CLOSE,(function(){if(e)return Object(s.b)(),s.b.flush(),window.location=Object(r.route)("payments.xsolla.completed",{foreignInvoice:t})}))},e}()}).call(this,n("5wds"))},"0yP9":function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return u}));var i=n("0h6b"),s=n("Hs9Z"),o=n("lv9K"),a=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};class u{constructor(){Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:-1}),Object.defineProperty(this,"shouldShowSuggestions",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"suggestions",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"debouncedFetchSuggestions",{enumerable:!0,configurable:!0,writable:!0,value:Object(s.debounce)(this.fetchSuggestions,200)}),Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"xhr",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object(o.p)(this)}get isSuggestionsVisible(){return this.shouldShowSuggestions&&this.suggestions.length>0}get selectedItem(){return this.suggestions[this.selectedIndex]}get displayText(){return null==this.selectedItem?this.query:this.selectedItem.title}cancel(){var t;null===(t=this.xhr)||void 0===t||t.abort(),this.debouncedFetchSuggestions.cancel()}search(){const e=this.displayText.trim();e.length&&t.visit(Object(i.route)("search",{mode:"wiki_page",query:e}))}selectIndex(t){return t<-1?this.selectIndex(this.suggestions.length-1):t>=this.suggestions.length?this.selectIndex(-1):(this.selectedIndex=t,void(this.shouldShowSuggestions=!0))}shiftSelectedIndex(t){this.selectIndex(this.selectedIndex+t)}unselect(t){this.selectIndex(-1),this.shouldShowSuggestions=this.shouldShowSuggestions&&!t}updateQuery(t){var e;const n=t.trim(),r=this.query.trim();this.query=t,this.selectedIndex=-1,r!==n&&(null===(e=this.xhr)||void 0===e||e.abort(),n.length>1?this.debouncedFetchSuggestions():this.suggestions.length=0)}fetchSuggestions(){this.xhr=r.getJSON(Object(i.route)("wiki-suggestions"),{query:this.query.trim()}).done(Object(o.f)(t=>{null!=t&&(this.suggestions=Object(o.q)(t),this.shouldShowSuggestions=!0)}))}}a([o.q],u.prototype,"selectedIndex",void 0),a([o.q],u.prototype,"shouldShowSuggestions",void 0),a([o.q],u.prototype,"suggestions",void 0),a([o.q],u.prototype,"query",void 0),a([o.h],u.prototype,"isSuggestionsVisible",null),a([o.h],u.prototype,"selectedItem",null),a([o.h],u.prototype,"displayText",null),a([o.f],u.prototype,"cancel",null),a([o.f],u.prototype,"search",null),a([o.f],u.prototype,"selectIndex",null),a([o.f],u.prototype,"shiftSelectedIndex",null),a([o.f],u.prototype,"unselect",null),a([o.f],u.prototype,"updateQuery",null),a([o.f],u.prototype,"fetchSuggestions",null)}).call(this,n("dMdw"),n("5wds"))},"1P+u":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("f4vq"),i=n("/G9H"),s=n("MeXQ"),o=n("6e4D"),a=n("is6n"),u=n("vZz4");const l={id:null,text:osu.trans("rankings.countries.all")};class c extends i.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"countriesSorted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"optionsCached",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"prevCountries",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"handleCountryChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{osu.navigate(Object(u.i)(null,{country:t.id,page:null}))}}),Object.defineProperty(this,"handleFilterChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{osu.navigate(Object(u.i)(null,{filter:t.currentTarget.dataset.value,page:null}))}}),Object.defineProperty(this,"handleRenderOption",{enumerable:!0,configurable:!0,writable:!0,value:t=>{var e;return i.createElement("a",{key:null!==(e=t.option.id)&&void 0!==e?e:"",className:t.cssClasses,href:Object(u.i)(null,{country:t.option.id,page:null}),onClick:t.onClick},t.children)}}),Object.defineProperty(this,"handleVariantChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{osu.navigate(Object(u.i)(null,{page:null,variant:t.currentTarget.dataset.value}))}})}get countries(){return null==this.props.countries?[]:(null==this.countriesSorted&&(this.countriesSorted=this.props.countries.sort((t,e)=>{var n,i;if((null===(n=r.a.currentUser)||void 0===n?void 0:n.country_code)===t.code)return-1;if((null===(i=r.a.currentUser)||void 0===i?void 0:i.country_code)===e.code)return 1;const s=e.display-t.display;return 0!==s?s:t.name.localeCompare(e.name)})),this.countriesSorted)}get countryCode(){return Object(a.b)().get("country")}get currentVariant(){return Object(a.b)().get("variant")}get filterMode(){return Object(a.b)().get("filter")}get options(){if(null==this.optionsCached){const t=this.optionsCached=new Map;t.set(l.id,l),this.countries.forEach(e=>{t.set(e.code,{id:e.code,text:e.name})})}return this.optionsCached}get selectedOption(){var t;return null!==(t=this.options.get(this.countryCode))&&void 0!==t?t:l}render(){var t;return this.prevCountries!==this.props.countries&&(this.countriesSorted=void 0,this.optionsCached=void 0,this.prevCountries=this.props.countries),i.createElement("div",{className:"ranking-filter"},i.createElement("div",{className:"ranking-filter__item ranking-filter__item--full"},this.renderCountries()),null!=r.a.currentUser&&i.createElement("div",{className:"ranking-filter__item"},i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.filter.title")),i.createElement(o.a,{currentValue:null!==(t=this.filterMode)&&void 0!==t?t:"all",onChange:this.handleFilterChange,showTitle:!1,values:["all","friends"]})),null!=this.props.variants&&i.createElement("div",{className:"ranking-filter__item"},i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.filter.variant.title")),this.renderVariants()))}renderCountries(){return"performance"!==this.props.type?null:i.createElement(i.Fragment,null,i.createElement("div",{className:"ranking-filter__item--title"},osu.trans("rankings.countries.title")),i.createElement(s.a,{bn:"ranking-select-options",onChange:this.handleCountryChange,options:[...this.options.values()],renderOption:this.handleRenderOption,selected:this.selectedOption}))}renderVariants(){var t;return null==this.props.variants?null:i.createElement(o.a,{currentValue:null!==(t=this.currentVariant)&&void 0!==t?t:"all",onChange:this.handleVariantChange,showTitle:!1,transPrefix:`beatmaps.variant.${this.props.gameMode}.`,values:this.props.variants})}}},"38ot":function(t,e,n){(function(t){var e;e=document.getElementsByClassName("js-fixed-element"),t(document).on("shown.bs.modal",".modal",(function(e){if(!osu.isIos)return t(e.target).find(".modal-af").focus()})),t(document).on("hidden.bs.modal",".modal",(function(){return t(".modal-backdrop").remove(),t("body, .js-fixed-element").css({paddingRight:""})})),t(document).on("show.bs.modal",".modal",(function(){var n,r,i,s,o,a,u,l;for(Timeout.set(10,(function(){return t(".modal-backdrop").trigger("bsTransitionEnd")})),n=[],i=s=0,a=e.length;s<a;i=++s)r=e[i],n[i]=r.getBoundingClientRect(),n[i].skip="fixed"!==getComputedStyle(r).position;for(l=[],i=o=0,u=e.length;o<u;i=++o)r=e[i],n[i].skip||(r.style.left=n[i].left+"px",l.push(r.style.width=n[i].width+"px"));return l})),t(document).on("shown.bs.modal",".modal",(function(){var n,r,i,s,o,a,u,l,c;for(u=t("body").css("padding-right"),c=[],r=i=0,o=e.length;i<o;r=++i)n=e[r],c[r]="fixed"!==getComputedStyle(n).position;for(l=[],r=s=0,a=e.length;s<a;r=++s)n=e[r],c[r]||(n.style.paddingRight=u,n.style.left="",l.push(n.style.width=""));return l}))}).call(this,n("5wds"))},"3Te0":function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("0h6b"),i=n("/G9H"),s=n("MeXQ");class o extends i.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"handleChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{osu.navigate(this.href(t.id))}}),Object.defineProperty(this,"renderOption",{enumerable:!0,configurable:!0,writable:!0,value:t=>{var e;return i.createElement("a",{key:null!==(e=t.option.id)&&void 0!==e?e:-1,className:t.cssClasses,href:this.href(t.option.id),onClick:t.onClick},t.children)}})}render(){const t=this.props.rooms.map(t=>({id:t.id,text:t.name})),e={id:this.props.currentRoom.id,text:this.props.currentRoom.name};return i.createElement(s.a,{bn:"spotlight-select-options",onChange:this.handleChange,options:t,renderOption:this.renderOption,selected:e})}href(t){return Object(r.route)("multiplayer.rooms.show",{room:null!=t?t:"latest"})}}},"5ASV":function(t,e,n){(function(t){window.StoreCart=function(){function e(){}return e.setEnabled=function(e){return t(".js-store-add-to-cart").prop("disabled",!e),t("#product-form").data("disabled",!e)},e}()}).call(this,n("5wds"))},"5hXa":function(t,e,n){(function(t){t(document).on("keypress",".js-auto-submit",(function(e){if(13===e.which)return e.preventDefault(),t(e.target).trigger("change")})),t(document).on("change",".js-auto-submit",(function(e){var n;if((n=t(e.target)).val()!==n.data("last-submitted-value"))return n.data("last-submitted-value",n.val()),n.parents("form").submit()})),t(document).on("keypress",".content-editable-submit",(function(e){if(13===e.which)return e.preventDefault(),t(e.target).trigger("blur")})),t(document).on("blur",".content-editable-submit",(function(e){var n,r,i;if((r=t(e.target)).html()!==r.data("last-submitted-value"))return r.data("last-submitted-value",r.html()),n=r.parents("form"),(i=t(document.createElement("input"))).attr("type","hidden"),i.attr("name",r.attr("data-name")),i.attr("value",r.html()),n.append(i),n.submit(),i.remove()})),t(document).on("turbolinks:load",(function(){return t(".content-editable-submit").each((function(e,n){var r;return(r=t(n)).data("last-submitted-value",r.html())}))})),t(document).on("click","#popup-container, #overlay",(function(e){var n;return t("#overlay").fadeOut(),(n=t(e.target).closest(".popup-active")).fadeOut(null,n.remove)})),t(document).on("turbolinks:load",(function(){return t("[value=_disabled]").attr("disabled",!0)})),t(document).on("click",".clickable-row",(function(t){var e,n,r;if(r=t.target,!osu.isClickable(r))return(n=t.currentTarget).classList.contains("clickable-row-link")?n.click():null!=(e=n.getElementsByClassName("clickable-row-link")[0])?e.click():void 0})),t(document).on("keydown",".js-quick-submit",(function(e){if((e.ctrlKey||e.metaKey)&&13===e.keyCode)return e.preventDefault(),t(e.target).closest("form").submit()})),t(document).on("ajax:beforeSend",(function(t){var e,n,r,i,s,o;if((n=t.target)._submitting)return!1;for(n._submitting=!0,n._ujsSubmitDisabled=[],o=[],r=0,i=(s=n.querySelectorAll(".js-ujs-submit-disable")).length;r<i;r++)(e=s[r]).disabled||("1"===e.dataset.blurOnSubmitDisable&&e.blur(),e.disabled=!0,o.push(n._ujsSubmitDisabled.push(e)));return o})),t(document).on("ajax:complete",(function(t){var e,n,r;for((n=t.target)._submitting=!1,r=[];e=n._ujsSubmitDisabled.pop();)r.push(e.disabled=!1);return r}))}).call(this,n("5wds"))},"6FbF":function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.CheckboxValidation=function(){function n(){this.validate=e(this.validate,this),t(document).on("change",".js-checkbox-validation",this.validate)}return n.prototype.validate=function(t){var e,n,r,i,s,o,a,u;if(null==(e=t.currentTarget)._checkboxValidationCache&&(e._checkboxValidationCache=JSON.parse(t.currentTarget.dataset.checkboxValidation)),a=t.target.name,null!=(i=t.currentTarget._checkboxValidationCache[a])){for(n=t.currentTarget.querySelectorAll("[name='"+a+"']"),u=t.currentTarget.getElementsByClassName("js-checkbox-validation--submit")[0],r=0,s=0,o=n.length;s<o;s++)n[s].checked&&(r+=1);return u.disabled=r<i.min||r>i.max}},n}()}).call(this,n("5wds"))},"6TQG":function(t,e,n){"use strict";(function(t){var e=n("is6n"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumTopicReply=function(){function n(e){this.bbcodePreview=e.bbcodePreview,this.forum=e.forum,this.stickyFooter=e.stickyFooter,this.toggleStick=r(this.toggleStick,this),this.toggleDeactivate=r(this.toggleDeactivate,this),this.toggle=r(this.toggle,this),this.stickOrUnstick=r(this.stickOrUnstick,this),this.posted=r(this.posted,this),this.enableFlash=r(this.enableFlash,this),this.deactivate=r(this.deactivate,this),this.activateWithReply=r(this.activateWithReply,this),this.activate=r(this.activate,this),this.setState=r(this.setState,this),this.getState=r(this.getState,this),this.deleteState=r(this.deleteState,this),this.available=r(this.available,this),this.initialize=r(this.initialize,this),this.container=document.getElementsByClassName("js-forum-topic-reply--container"),this.box=document.getElementsByClassName("js-forum-topic-reply"),this.block=document.getElementsByClassName("js-forum-topic-reply--block"),this.input=document.getElementsByClassName("js-forum-topic-reply--input"),this.toggleButtons=document.getElementsByClassName("js-forum-topic-reply--toggle"),this.fixedBar=document.getElementsByClassName("js-sticky-footer--fixed-bar"),t(document).on("ajax:success",".js-forum-topic-reply",this.posted),t(document).on("click",".js-forum-topic-reply--deactivate",this.toggleDeactivate),t(document).on("click",".js-forum-topic-reply--toggle",this.toggle),t(document).on("ajax:success",".js-forum-topic-reply--quote",this.activateWithReply),t(document).on("focus",".js-forum-topic-reply--input",this.activate),t.subscribe("stickyFooter",this.stickOrUnstick),t(document).on("turbolinks:load",this.initialize)}return n.prototype.marker=function(){return document.querySelector('.js-sticky-footer[data-sticky-footer-target="forum-topic-reply"]')},n.prototype.$input=function(){return t(".js-forum-topic-reply--input")},n.prototype.initialize=function(){if(this.available())return this.deleteState("sticking"),"1"===this.getState("active")?this.activate():void 0},n.prototype.available=function(){return this.block.length},n.prototype.deleteState=function(t){return localStorage.removeItem("forum-topic-reply--"+Object(e.a)().pathname+"--"+t)},n.prototype.getState=function(t){return localStorage.getItem("forum-topic-reply--"+Object(e.a)().pathname+"--"+t)},n.prototype.setState=function(t,n){return localStorage.setItem("forum-topic-reply--"+Object(e.a)().pathname+"--"+t,n)},n.prototype.activate=function(){var e,n,r,i;for(this.setState("active","1"),this.stickyFooter.markerEnable(this.marker()),t.publish("stickyFooter:check"),e=0,n=(r=this.toggleButtons).length;e<n;e++)r[e].classList.add("js-activated");return"1"!==this.getState("sticking")&&null!=currentUser.id&&this.enableFlash(),Timeout.set(0,(i=this,function(){return i.input[0].focus()}))},n.prototype.activateWithReply=function(t,e){var n,r;return e+="\n",(r=(n=this.$input()).val())&&(e=r+"\n\n"+e),n.val(e).trigger("input"),n[0].selectionStart=e.length,this.activate()},n.prototype.deactivate=function(){var e,n,r,i,s;for(this.stickyFooter.markerDisable(this.marker()),this.setState("active","0"),t.publish("stickyFooter:check"),this.disableFlash(),s=[],n=0,r=(i=this.toggleButtons).length;n<r;n++)e=i[n],s.push(e.classList.remove("js-activated"));return s},n.prototype.disableFlash=function(){return t(".js-forum-topic-reply").removeClass("js-forum-topic-reply-flash")},n.prototype.enableFlash=function(){return t(".js-forum-topic-reply").addClass("js-forum-topic-reply-flash"),Timeout.set(500,this.disableFlash)},n.prototype.posted=function(e,n){var r,i;return i=this.input[0],this.deactivate(),i.value="",this.bbcodePreview.hidePreview({target:i}),r=t(n),this.forum.postPosition(r[0])-1!==this.forum.postPosition(this.forum.endPost())||"1"===e.target.dataset.forceReload?osu.navigate(r.find(".js-post-url").attr("href")):(this.forum.setTotalPosts(this.forum.totalPosts()+1),this.forum.endPost().insertAdjacentHTML("afterend",n),_exported.pageChange(),this.forum.endPost().scrollIntoView())},n.prototype.stickOrUnstick=function(t,e){var n;return n=osuCore.windowSize.isDesktop?"forum-topic-reply"===e:"1"===this.getState("active"),this.toggleStick(n)},n.prototype.toggle=function(){return"1"===this.getState("active")?this.deactivate():this.activate()},n.prototype.toggleDeactivate=function(t){return t.stopPropagation(),this.deactivate()},n.prototype.toggleStick=function(t){var e,n,r,i,s;if(i="1"===this.getState("sticking"),document.body.style.overflow=!t||osuCore.windowSize.isDesktop?"":"hidden",t!==i)return n=this.box[0],t?(this.setState("sticking","1"),n.dataset.state="stick",s=this.fixedBar[0]):(this.deleteState("sticking"),null!=n.dataset.state&&delete n.dataset.state,s=this.container[0]),r=(e=this.$input()).is(":focus"),s.insertBefore(n,s.firstChild),r&&e.focus(),_exported.pageChange()},n}()}).call(this,n("5wds"))},"6Z8S":function(t,e,n){(function(t){var e;e=t({}),t.subscribe=e.on.bind(e),t.unsubscribe=e.off.bind(e),t.publish=e.trigger.bind(e)}).call(this,n("5wds"))},"8DVv":function(t,e,n){"use strict";(function(t,e){var r=n("Ma8u");t(document).on("ajax:before",(function(){return Object(r.b)(),t(document).one("ajax:complete.ujsHideLoadingOverlay",r.a)})),t(document).on("ajax:success",(function(n,r){var i,s;return s=function(){if(!e.isEmpty(null!=r?r.message:void 0))return osu.popup(r.message,"success")},"1"===n.target.getAttribute("data-reload-on-success")?(i="1"===n.target.getAttribute("data-reload-reset-scroll"),t(document).one("turbolinks:load",s),osu.reloadPage(!i)):s()})),t(document).on("ajax:error",(function(t,e){if("1"!==t.target.dataset.skipAjaxErrorPopup&&401!==e.status)return osu.ajaxError(e)}))}).call(this,n("5wds"),n("Hs9Z"))},"9put":function(t,e,n){(function(t,e,n){var r=function(t,e){return function(){return t.apply(e,arguments)}};window.TooltipDefault=function(){function i(){this.timeagoTip=r(this.timeagoTip,this),this.rollback=r(this.rollback,this),this.autoAddTooltip=r(this.autoAddTooltip,this),this.onMouseOver=r(this.onMouseOver,this),t(document).on("mouseover touchstart","[title]:not(iframe)",this.onMouseOver),t(document).on("mouseenter touchstart",".u-ellipsis-overflow, .u-ellipsis-overflow-desktop, .u-ellipsis-pre-overflow",this.autoAddTooltip),t(document).on("turbolinks:load",this.rollback)}return i.prototype.onMouseOver=function(n){var r,i,s,o,a,u,l,c,h;if(h=(o=n.currentTarget).getAttribute("title"),o.removeAttribute("title"),a=osu.presence(o.dataset.htmlTitle),0!==e.size(h)||null!=a){if(r=o.classList.contains("js-timeago")||o.classList.contains("js-tooltip-time")?this.timeagoTip(o,h):null!=a?a:t("<span>").text(h),!o._tooltip)return o._tooltip=!0,i=null!=(c=o.dataset.tooltipPosition)?c:"top center",u=function(){switch(i){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center";case"bottom center":return"top center"}}(),s="qtip tooltip-default","fixed"===o.dataset.tooltipFloat&&(s+=" tooltip-default--fixed"),null!=o.dataset.tooltipModifiers&&(s+=" tooltip-default--"+o.dataset.tooltipModifiers),l={overwrite:!1,content:r,position:{my:u,at:i,viewport:t(window)},show:{event:n.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:s,tip:{width:10,height:8}}},"touchstart"===n.type&&(l.hide={inactive:3e3,event:"unfocus"}),o.dataset.tooltipPinPosition&&(l.position.effect=!1),o.dataset.tooltipHideEvents&&(l.hide.event=o.dataset.tooltipHideEvents),o.dataset.origTitle=h,t(o).qtip(l,n);t(o).qtip("set",{"content.text":r})}},i.prototype.autoAddTooltip=function(e){var n,r,i;return i=e.currentTarget,r=(n=t(i)).qtip("api"),i.offsetWidth<i.scrollWidth?r?r.enable():(n.attr("title",n.text()),n.trigger(e.type)):null!=r?r.disable():void 0},i.prototype.remove=function(e){if(e._tooltip)return t(e).qtip("destroy",!0),e._tooltip=!1,null==e.getAttribute("title")&&e.setAttribute("title",e.dataset.origTitle),delete e.dataset.origTitle},i.prototype.rollback=function(){var e,n,r,i,s;for(t(".qtip").remove(),s=[],n=0,r=(i=document.querySelectorAll("[data-orig-title]")).length;n<r;n++)e=i[n],s.push(e.setAttribute("title",e.dataset.origTitle));return s},i.prototype.timeagoTip=function(e,r){var i,s,o,a,u,l;return l=null!=(o=null!=(a=e.getAttribute("datetime"))?a:r)?o:e.textContent,u=n(l),i=t("<strong>").text(u.format("LL")),s=t("<span>").addClass("tooltip-default__time").text(u.format("LTS")+" "+this.tzString(u)),t("<span>").append(i).append(" ").append(s)},i.prototype.tzString=function(t){var e;return"UTC"+((e=t.utcOffset())%60==0?(e>=0?"+":"")+e/60:t.format("Z"))},i}()}).call(this,n("5wds"),n("Hs9Z"),n("7EfK"))},AOHe:function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return a}));var i=n("SquP"),s=n("0vL2"),o=n("Ma8u"),a=function(){function e(){}return e.CHECKOUT_SELECTOR=".js-store-checkout-button",e.initialize=function(){var n,r,i,a,u,l,c;for(i={},r=0,a=(c=document.querySelectorAll(e.CHECKOUT_SELECTOR)).length;r<a;r++)switch(n=c[r],l=n.dataset.provider,u=n.dataset.orderNumber,l){case"centili":i.centili=Promise.resolve();break;case"free":i.free=Promise.resolve();break;case"paypal":i.paypal=Promise.resolve();break;case"xsolla":i.xsolla=s.a.promiseInit(u)}return t(e.CHECKOUT_SELECTOR).on("click.checkout",(function(n){var r,s,a;if(s=n.target.dataset,r=s.orderId,null!=(l=s.provider))return Object(o.b)(),o.b.flush(),null!=(a=i[l])?a.then((function(){return window.osu.promisify(t.post(laroute.route("store.checkout.store"),{provider:l,orderId:r}))})).then((function(){return e.startPayment(n.target.dataset)})).catch(e.handleError):void 0}))},e.startPayment=function(e){var n,r,s;switch(n=e.orderId,r=e.provider,s=e.url,r){case"centili":return new Promise((function(t){return window.location.href=s}));case"free":return window.osu.promisify(t.post(laroute.route("store.checkout.store",{orderId:n,provider:r})));case"paypal":return i.a.fetchApprovalLink(n).then((function(t){return window.location.href=t}));case"xsolla":return new Promise((function(t){return XPayStationWidget.open(),Object(o.a)(),t()}))}},e.handleError=function(t){var e;if(Object(o.a)(),!t.getResponseHeader||(e=t.getResponseHeader("Content-Type"),!r.startsWith(e,"application/javascript")))return osu.ajaxError(null!=t?t.xhr:void 0)},e}()}).call(this,n("5wds"),n("Hs9Z"))},CFbt:function(t,e,n){(function(t){var e;e=function(e,n,r){var i,s,o,a,u,l;return null==r&&(r=""),o=(i=t(e.target).parents("form").find("[name=body], .js-bbcode-body")).val(),u=(s=i[0]).selectionStart,a=s.selectionEnd,(l=[o.substring(0,u),o.substring(u,a),o.substring(a)])[0]=l[0]+n,l[2]=r+l[2],u===a?(i.val(l[0]+l[2]),s.selectionStart=l[0].length,s.selectionEnd=s.selectionStart):(i.val(l[0]+l[1]+l[2]),s.selectionStart=u,s.selectionEnd=l[0].length+l[1].length+r.length),i.trigger("bbcode:inserted").trigger("input").focus()},[["bold","[b]","[/b]"],["heading","[heading]","[/heading]"],["image","[img]","[/img]"],["italic","[i]","[/i]"],["link","[url]","[/url]"],["list","[list]\n[*]","[/list]"],["list-numbered","[list=1]\n[*]","[/list]"],["strikethrough","[s]","[/s]"],["underline","[u]","[/u]"],["spoilerbox","[box=]","[/box]"]].forEach((function(n){var r,i,s;return r=n[0],s=n[1],i=n[2],t(document).on("click",".js-bbcode-btn--"+r,(function(t){return e(t,s,i)}))})),t(document).on("turbolinks:load",(function(){return t(".js-bbcode-btn--size").val("")})),t(document).on("change",".js-bbcode-btn--size",(function(n){var r,i;return r=t(n.target),i=parseInt(r.val(),10),r.val(""),e(n,"[size="+i+"]","[/size]")}))}).call(this,n("5wds"))},CwFt:function(t,e,n){"use strict";var r=n("0h6b"),i=n("KUml"),s=n("/G9H"),o=n("PPOh"),a=n("mk7q"),u=n("tX/w"),l=n("9JFa"),c=n("yun6");function h({beatmapset:t,modifiers:e=[]}){const n=Object(r.route)("beatmapsets.show",{beatmapset:t.id});return s.createElement("a",{className:Object(u.a)("beatmapset-search-card",e),href:n},s.createElement("div",{className:"beatmapset-search-card__cover-container"},s.createElement(l.a,{className:"beatmapset-search-card__cover",src:t.covers.list})),s.createElement("div",{className:"beatmapset-search-card__details"},s.createElement("div",{className:"beatmapset-search-card__title"},`${Object(c.f)(t)} `,s.createElement("span",{className:"beatmapset-search-card__title-artist"},osu.trans("users.show.extra.beatmaps.by_artist",{artist:Object(c.c)(t)}))),s.createElement("div",{className:"beatmapset-search-card__extra"},osu.trans("beatmapsets.show.details.mapped_by",{mapper:t.creator}))))}var d=n("VbpL"),p=n("jEEn"),f=n("VefT"),m=n("AJEZ");function g({user:t,modifiers:e=[]}){const n=Object(r.route)("users.show",{user:t.id});return s.createElement("div",{className:`${Object(u.a)("user-search-card",e)} clickable-row`},s.createElement("a",{className:"user-search-card__avatar-container",href:n},s.createElement("div",{className:"avatar avatar--full",style:{backgroundImage:osu.urlPresence(t.avatar_url)}})),s.createElement("div",{className:"user-search-card__details"},s.createElement("div",{className:"user-search-card__col  user-search-card__col--flag"},s.createElement(p.a,{country:t.country})),s.createElement("a",{className:"user-search-card__col user-search-card__col--username clickable-row-link",href:n},t.username),t.is_supporter?s.createElement("div",{className:"user-search-card__col user-search-card__col--icon u-hidden-narrow"},s.createElement(f.a,{level:t.support_level,modifiers:["quick-search"]})):null,s.createElement(m.a,{groups:t.groups,short:!0,wrapper:"user-search-card__col user-search-card__col--icon"}),s.createElement("div",{className:"user-search-card__col user-search-card__col--icon"},s.createElement(d.a,{modifiers:"quick-search",userId:t.id}))))}const v=["forum_post","wiki_page"];let b=class extends s.Component{constructor(){super(...arguments),Object.defineProperty(this,"inputRef",{enumerable:!0,configurable:!0,writable:!0,value:s.createRef()}),Object.defineProperty(this,"focus",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var t;null!=this.inputRef.current&&(this.inputRef.current.selectionStart=0,this.inputRef.current.selectionEnd=this.inputRef.current.value.length,this.props.worker.selectNone(),null===(t=this.inputRef.current)||void 0===t||t.focus())}}),Object.defineProperty(this,"onInputKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:t=>{const e=t.key;"Enter"===e&&(this.props.worker.debouncedSearch.flush(),this.navigateToSelected()),"ArrowUp"!==e&&"ArrowDown"!==e||this.props.worker.cycleSelectedItem("ArrowDown"===e?1:-1)}}),Object.defineProperty(this,"onMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:t=>{var e;const n=t.currentTarget.dataset.section,r=parseInt(null!==(e=t.currentTarget.dataset.index)&&void 0!==e?e:"0",10);this.selectBox(n,r)}}),Object.defineProperty(this,"onMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.props.worker.selectNone()}}),Object.defineProperty(this,"updateQuery",{enumerable:!0,configurable:!0,writable:!0,value:t=>{this.props.worker.updateQuery(t.currentTarget.value)}})}render(){let t=Object(u.a)("quick-search",this.props.modifiers);return t+=" u-fancy-scrollbar",s.createElement("div",{className:t},s.createElement("div",{className:"quick-search-input"},s.createElement("div",{className:"quick-search-input__field"},s.createElement("span",{className:"quick-search-input__icon"},this.props.worker.searching?s.createElement(o.a,null):s.createElement("span",{className:"fas fa-search"})),s.createElement("input",{ref:this.inputRef,className:"quick-search-input__input js-click-menu--autofocus",onChange:this.updateQuery,onKeyDown:this.onInputKeyDown,placeholder:osu.trans("home.search.placeholder"),value:this.props.worker.query})),null!=this.props.onClose&&s.createElement("button",{className:"btn-osu-big btn-osu-big--quick-search-close",onClick:this.props.onClose,type:"button"},osu.trans("common.buttons.close"))),this.renderResult())}boxIsActive(t,e){var n;const r=this.props.worker;return r.currentSection===t&&(null===(n=r.selected)||void 0===n?void 0:n.index)===e}count(t){return null===this.props.worker.searchResult?0:this.props.worker.searchResult[t].total}navigateToSelected(){const t=this.props.worker.selectedURL;t&&osu.navigate(t,!1)}renderBeatmapsets(){return null===this.props.worker.searchResult?null:s.createElement("div",{className:"quick-search-items"},this.props.worker.searchResult.beatmapset.beatmapsets.map((t,e)=>s.createElement("div",{key:t.id,className:"quick-search-items__item","data-index":e,"data-section":"beatmapset",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s.createElement(h,{beatmapset:t,modifiers:this.boxIsActive("beatmapset",e)?["active"]:[]}))),s.createElement("div",{className:"quick-search-items__item","data-section":"beatmapset_others",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderResultLink("beatmapset",this.boxIsActive("beatmapset_others",0))))}renderMoreOtherResultLink(){const t=v.filter(t=>this.count(t)>0);return 0===t.length?null:s.createElement("div",{className:"quick-search-items"},t.map((t,e)=>s.createElement("div",{key:t,className:"quick-search-items__item","data-index":e,"data-section":"others",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderResultLink(t,this.boxIsActive("others",e)))))}renderNoMoreOtherResultLink(){const t=v.filter(t=>0===this.count(t));return 0===t.length?null:s.createElement("div",{className:"quick-search-items quick-search-items--empty"},t.map(t=>s.createElement("div",{key:t,className:"quick-search-items__item"},osu.trans("quick_search.result.empty_for",{modes:osu.trans(`quick_search.mode.${t}`)}))))}renderOthers(){return 0===this.count("forum_post")&&0===this.count("wiki_page")?s.createElement("span",{className:"quick-search-items quick-search-items--empty"},osu.trans("quick_search.result.empty_for",{modes:osu.transArray([osu.trans("quick_search.mode.forum_post"),osu.trans("quick_search.mode.wiki_page")])})):s.createElement(s.Fragment,null,this.renderMoreOtherResultLink(),this.renderNoMoreOtherResultLink())}renderResult(){return null==this.props.worker.searchResult?null:s.createElement("div",{className:"quick-search-result"},s.createElement("div",{className:"quick-search-result__item"},this.renderTitle("user"),this.renderUsers()),s.createElement("div",{className:"quick-search-result__item"},this.renderTitle("beatmapset"),this.renderBeatmapsets()),s.createElement("div",{className:"quick-search-result__item"},this.renderTitle("other"),this.renderOthers()))}renderResultLink(t,e=!1){let n="quick_search.result.";return n+=v.includes(t)?"title":"more",s.createElement("a",{className:Object(u.a)("search-result-more",e?["active"]:[]),href:Object(r.route)("search",{mode:t,query:this.props.worker.query})},s.createElement("div",{className:"search-result-more__content"},osu.trans(n,{mode:osu.trans(`quick_search.mode.${t}`)}),s.createElement("span",{className:"search-result-more__count"},osu.formatNumber(this.count(t)))),s.createElement("div",{className:"search-result-more__arrow"},s.createElement("span",{className:"fas fa-angle-right"})))}renderTitle(t){return s.createElement("h2",{className:"title"},s.createElement(a.a,{mappings:{mode:s.createElement("strong",null,osu.trans(`quick_search.mode.${t}`))},pattern:osu.trans("quick_search.result.title")}))}renderUsers(){return null==this.props.worker.searchResult?null:0===this.count("user")?s.createElement("span",{className:"quick-search-items quick-search-items--empty"},osu.trans("quick_search.result.empty",{mode:osu.trans("quick_search.mode.beatmapset")})):s.createElement("div",{className:"quick-search-items"},this.props.worker.searchResult.user.users.map((t,e)=>s.createElement("div",{key:t.id,className:"quick-search-items__item","data-index":e,"data-section":"user",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},s.createElement(g,{modifiers:this.boxIsActive("user",e)?["active"]:[],user:t}))),this.count("user")>this.props.worker.searchResult.user.users.length&&s.createElement("div",{className:"quick-search-items__item","data-section":"user_others",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.renderResultLink("user",this.boxIsActive("user_others",0))))}selectBox(t,e=0){this.props.worker.setSelected(t,e)}};b=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}([i.b],b);e.a=b},"E+Th":function(t,e,n){"use strict";(function(t,e,r){var i=n("/DQ7"),s=function(t,e){return function(){return t.apply(e,arguments)}};window.FancyChart=function(){function n(e,n){var r,i,o,a;this.options=null!=n?n:{},this.lookupIndexFromX=s(this.lookupIndexFromX,this),this.hoverRefresh=s(this.hoverRefresh,this),this.hoverEnd=s(this.hoverEnd,this),this.resize=s(this.resize,this),this.recalc=s(this.recalc,this),this.reveal=s(this.reveal,this),this.drawLine=s(this.drawLine,this),this.setWrapperSize=s(this.setWrapperSize,this),this.setSvgSize=s(this.setSvgSize,this),this.setLineSize=s(this.setLineSize,this),this.setScalesRange=s(this.setScalesRange,this),this.setHoverAreaSize=s(this.setHoverAreaSize,this),this.setDimensions=s(this.setDimensions,this),this.loadData=s(this.loadData,this),this.hide=s(this.hide,this),null==(r=this.options).scales&&(r.scales={}),null==(i=this.options.scales).x&&(i.x=t.scaleLinear()),null==(o=this.options.scales).y&&(o.y=t.scaleLinear()),this.margins={top:25,right:20,bottom:10,left:0},this.area=t.select(e),this.area.selectAll(".fancy-graph").remove(),this.svg=this.area.append("svg").classed("fancy-graph",!0),this.svgWrapper=this.svg.append("g"),this.svgLine=this.svgWrapper.append("path").classed("fancy-graph__line",!0).attr("opacity",0),this.line=t.line().curve(t.curveMonotoneX),this.svgEndCircle=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("r",2).attr("opacity",0),this.svgHoverArea=this.svg.append("rect").classed("fancy-graph__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.hoverRefresh).on("drag",this.hoverRefresh),this.svgHoverMark=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("data-visibility","hidden").attr("r",2),a=_exported.parseJsonNullable(e.dataset.src),this.loadData(a)}return n.prototype.hide=function(){return this.svgEndCircle.attr("opacity",0),this.svgLine.attr("opacity",0)},n.prototype.loadData=function(t){if(!e.isEqual(t,this.data))return this.data=null!=t?t:[],this.svgLine.datum(this.data),this.reveal()},n.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},n.prototype.setHoverAreaSize=function(){return this.svgHoverArea.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},n.prototype.setScalesRange=function(){var e,n,r,i;return this.options.scales.x.range([0,this.width]).domain(null!=(e=null!=(n=this.options.domains)?n.x:void 0)?e:t.extent(this.data,(function(t){return t.x}))),this.options.scales.y.range([this.height,0]).domain(null!=(r=null!=(i=this.options.domains)?i.y:void 0)?r:t.extent(this.data,(function(t){return t.y})))},n.prototype.setLineSize=function(){var t,n;if(this.line.x((n=this,function(t){return n.options.scales.x(t.x)})).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this)),null!=(t=e.last(this.data)))return this.svgEndCircle.attr("transform","translate("+this.options.scales.x(t.x)+", "+this.options.scales.y(t.y)+")")},n.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},n.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},n.prototype.drawLine=function(){return this.svgLine.attr("stroke-dasharray",0).attr("d",this.line)},n.prototype.reveal=function(){var e;return null==this.data[0]?this.hide():(this.recalc(),this.svgLine.attr("d",this.line),e=this.svgLine.node().getTotalLength(),this.svgEndCircle.attr("opacity",0),this.svgLine.attr("stroke-dasharray",e).attr("stroke-dashoffset",e).transition().delay(400).duration(1e3).ease(t.easeSinOut).attr("stroke-dashoffset",0).attr("opacity",1),this.svgEndCircle.transition().delay(1300).duration(300).ease(t.easeSinOut).attr("opacity",1))},n.prototype.recalc=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setLineSize(),this.setHoverAreaSize()},n.prototype.resize=function(){return this.recalc(),this.drawLine()},n.prototype.hoverEnd=function(){return Object(i.b)(this.svgHoverMark.node()),r.publish("fancy-chart:hover-"+this.options.hoverId+":end")},n.prototype.hoverRefresh=function(n){var s,o,a,u,l;if(null!=this.options.hoverId&&(null!=this.data[0]&&(u=this.options.scales.x.invert(t.pointer(n)[0]-this.margins.left),null!=(a=this.lookupIndexFromX(u)))))return Object(i.a)(this.svgHoverMark.node()),Timeout.clear(this._hoverTimeout),this._hoverTimeout=Timeout.set(3e3,this.hoverEnd),o=0===a?this.data[0]:a>=this.data.length?e.last(this.data):u-this.data[a-1].x<=this.data[a].x-u?this.data[a-1]:this.data[a],s=["x","y"].map((l=this,function(t){return l.options.scales[t](o[t])})),this.svgHoverMark.attr("transform","translate("+s.join(", ")+")"),r.publish("fancy-chart:hover-"+this.options.hoverId+":refresh",{data:o})},n.prototype.lookupIndexFromX=function(e){return t.bisector((function(t){return t.x})).left(this.data,e)},n}()}).call(this,n("kUxX"),n("Hs9Z"),n("5wds"))},"E/7X":function(t,e,n){"use strict";(function(t,e,r){var i,s,o=n("f4vq"),a=n("phBA"),u=n("Ma8u"),l=n("is6n"),c=function(t,e){return function(){return t.apply(e,arguments)}};s=function(e){return t.controller.replaceHistory(e)},i=e.debounce(s,250),window.Forum=function(){function n(){this.moreMeta=c(this.moreMeta,this),this.jumpToSubmit=c(this.jumpToSubmit,this),this.showMore=c(this.showMore,this),this.postUrlClick=c(this.postUrlClick,this),this.initialScrollTo=c(this.initialScrollTo,this),this.toggleDeleted=c(this.toggleDeleted,this),this.scrollTo=c(this.scrollTo,this),this.keyboardNavigation=c(this.keyboardNavigation,this),this.jumpTo=c(this.jumpTo,this),this.refreshCounter=c(this.refreshCounter,this),this.refreshLoadMoreLinks=c(this.refreshLoadMoreLinks,this),this.lastPostLoaded=c(this.lastPostLoaded,this),this.startingPostLoaded=c(this.startingPostLoaded,this),this.endPost=c(this.endPost,this),this.setCounter=c(this.setCounter,this),this.setTotalPosts=c(this.setTotalPosts,this),this.showDeleted=c(this.showDeleted,this),this.totalPosts=c(this.totalPosts,this),this.postPosition=c(this.postPosition,this),this.boot=c(this.boot,this),this._totalPostsDiv=document.getElementsByClassName("js-forum__total-count"),this._deletedPostsDiv=document.getElementsByClassName("js-forum__deleted-count"),this._postsCounter=document.getElementsByClassName("js-forum__posts-counter"),this._postsProgress=document.getElementsByClassName("js-forum__posts-progress"),this.posts=document.getElementsByClassName("js-forum-post"),this.loadMoreLinks=document.getElementsByClassName("js-forum-posts-show-more"),this.throttledBoot=e.throttle(this.boot,100),this.refreshCounterPaused=!0,this.maxPosts=250,r(document).on("turbolinks:load",this.throttledBoot),r.subscribe("osu:page:change",this.throttledBoot),r(window).on("scroll",this.refreshCounter),r(document).on("click",".js-forum-posts-show-more",this.showMore),r(document).on("click",".js-post-url",this.postUrlClick),r(document).on("submit",".js-forum-posts-jump-to",this.jumpToSubmit),r(document).on("keyup",this.keyboardNavigation),r(document).on("click",".js-forum-topic-moderate--toggle-deleted",this.toggleDeleted),r(document).on("turbolinks:before-cache",i.cancel)}return n.prototype.boot=function(){return this.refreshCounterPaused=!0,this.refreshLoadMoreLinks(),this.initialScrollTo()},n.prototype.userCanModerate=function(){return"1"===this.topicMeta().userCanModerate},n.prototype.postPosition=function(t){return parseInt(t.getAttribute("data-post-position"),10)},n.prototype.firstPostId=function(){return parseInt(this.topicMeta().firstPostId,10)},n.prototype.postId=function(t){return parseInt(t.getAttribute("data-post-id"),10)},n.prototype.topicMeta=function(){var t;return null!=(t=newBody.querySelector(".js-forum--topic-meta"))?t.dataset:void 0},n.prototype.totalPosts=function(){return 0===this._totalPostsDiv.length?null:parseInt(this._totalPostsDiv[0].dataset.total,10)},n.prototype.showDeleted=function(){var t;if(null!=(t=document.querySelector(".js-forum-topic-moderate--toggle-deleted")))return"1"===t.dataset.showDeleted},n.prototype.setTotalPosts=function(t){return r(this._totalPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},n.prototype.deletedPosts=function(){return 0===this._deletedPostsDiv.length?null:parseInt(this._deletedPostsDiv[0].dataset.total,10)},n.prototype.setDeletedPosts=function(t){return r(this._deletedPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},n.prototype.setCounter=function(t){return this.currentPostPosition=this.postPosition(t),this.currentPostPosition>this.totalPosts()&&this.setTotalPosts(this.currentPostPosition),i(this.postUrlN(this.currentPostPosition)),this._postsCounter[0].textContent=osu.formatNumber(this.currentPostPosition),this._postsProgress[0].style.width=100*this.currentPostPosition/this.totalPosts()+"%"},n.prototype.endPost=function(){return this.posts[this.posts.length-1]},n.prototype.startingPostLoaded=function(){var t,e;return(e="1"===(t=document.querySelector(".js-forum__posts-show-more--previous")).dataset.noMore)||(e=this.postId(this.posts[0])<=this.firstPostId())&&(t.dataset.noMore="1"),e},n.prototype.lastPostLoaded=function(){var t,e;return(t="1"===(e=document.querySelector(".js-forum__posts-show-more--next")).dataset.noMore)||(t=this.postPosition(this.endPost())>=this.totalPosts())&&(e.dataset.noMore="1"),t},n.prototype.refreshLoadMoreLinks=function(){var t,e,n,i,s,o,a;if(this.loadMoreLinks.length){for(a=this.startingPostLoaded(),r(".js-header--main").toggleClass("hidden",!a),r(".js-header--alt").toggleClass("hidden",a),e=this.lastPostLoaded(),r(".js-forum__posts-show-more--next").toggleClass("hidden",e),this.userCanModerate()||r(".js-post-delete-toggle").hide(),e&&r(this.endPost()).find(".js-post-delete-toggle").css({display:""}),o=[],t=0,n=(s=this.loadMoreLinks).length;t<n;t++)i=s[t],o.push(i.href=this.moreMeta(i).url);return o}},n.prototype.refreshCounter=function(){var t,e,n,r,i,s,u;if(!this.refreshCounterPaused&&0!==this._postsCounter.length){if(t=null,Object(a.a)())t=this.posts[this.posts.length-1];else for(u=o.a.stickyHeader.scrollOffsetValue,e=0,n=(s=this.posts).length;e<n&&(i=(r=s[e]).getBoundingClientRect().top,Math.floor(i-u)<=0);e++)t=r;return null==t&&(t=this.posts[0]),this.setCounter(t)}},n.prototype.jumpTo=function(e){var n;return e=parseInt(e,10),!!isFinite(e)&&(e=Math.max(e,1),e=Math.min(e,this.totalPosts()),n=r(".js-forum-post[data-post-position='"+e+"']"),this._postsCounter[0].textContent=osu.formatNumber(e),n.length?this.scrollTo(n.attr("data-post-id")):t.visit(this.postUrlN(e)),!0)},n.prototype.keyboardNavigation=function(t){var e;if(!osu.isInputElement(t.target)&&this._postsCounter.length){t.preventDefault(),e=function(){switch(t.which){case 37:return this.currentPostPosition-1;case 39:return this.currentPostPosition+1}}.call(this);try{return this.jumpTo(e)}catch(n){}}},n.prototype.scrollTo=function(t){var e,n,i;if(e=document.querySelector(".js-forum-post[data-post-id='"+t+"']"))return this.refreshCounterPaused=!0,n=1===this.postPosition(e)?0:r(e).offset().top,r.publish("sync-height:force"),0!==n&&(n=o.a.stickyHeader.scrollOffset(n)),window.scrollTo(window.pageXOffset,n),this.highlightPost(e),this.setCounter(e),i=this,setTimeout((function(){return i.refreshCounterPaused=!1}),0)},n.prototype.highlightPost=function(t){return r(".js-forum-post--highlighted").removeClass("js-forum-post--highlighted"),r(t).addClass("js-forum-post--highlighted")},n.prototype.toggleDeleted=function(){var e,n,r;if(null!=this.showDeleted())return n=osuCore.userPreferences.set("forum_posts_show_deleted",!this.showDeleted()),r=this,e=function(){return t.visit(r.postUrlN(r.currentPostPosition))},null!=n?n.done(e):e()},n.prototype.initialScrollTo=function(){var t;if(null!=(t=this.topicMeta()))return history.scrollRestoration="manual",r(document).one("turbolinks:before-cache",(function(){return history.scrollRestoration="auto"})),""===Object(l.a)().hash&&osu.present(t.postJumpTo)?(this.scrollTo(parseInt(t.postJumpTo,10)),t.postJumpTo=""):(this.refreshCounterPaused=!1,this.refreshCounter())},n.prototype.postUrlClick=function(t){var e;return t.preventDefault(),e=r(t.target).closest(".js-forum-post").attr("data-post-id"),this.scrollTo(e)},n.prototype.postUrlN=function(t){return Object(l.a)().pathname+"?n="+t},n.prototype.showMore=function(t){var n,i,s;if(t.preventDefault(),!(n=t.currentTarget).classList.contains("js-disabled"))return n.classList.add("js-disabled"),i=this.moreMeta(n),r.get(i.url).done((s=this,function(t){var r,o,a,u,l,c,h,d,p,f,m,g;if(null==t)return n.dataset.noMore="1",void s.refreshLoadMoreLinks();if(d=(h=i.refPost).getBoundingClientRect().top,"previous"===i.mode?(n.insertAdjacentHTML("afterend",t),m=s.maxPosts,f=s.posts.length):(n.insertAdjacentHTML("beforebegin",t),m=0,f=s.posts.length-s.maxPosts),m<f)for(u=s.posts[0].parentNode,o=0,a=(c=e.slice(s.posts,m,f)).length;o<a;o++)l=c[o],u.removeChild(l);return s.refreshLoadMoreLinks(),g=window.pageXOffset,r=h.getBoundingClientRect().top,p=window.pageYOffset+r-d,window.scrollTo(g,p),_exported.pageChange(),n.dataset.failed="0"})).always((function(){return n.classList.remove("js-disabled")})).fail((function(t){return n.dataset.failed="1",osu.ajaxError(t)}))},n.prototype.jumpToSubmit=function(t){if(t.preventDefault(),Object(u.a)(),this.jumpTo(r(t.target).find('[name="n"]').val()))return r.publish("forum:topic:jumpTo")},n.prototype.moreMeta=function(t){var e,n,i,s;return"previous"===(e=t.dataset.mode)?(i=this.posts[0],s="id_desc"):(i=this.endPost(),s="id_asc"),n=r.param({skip_layout:1,with_deleted:+this.showDeleted(),sort:s,cursor:{id:i.dataset.postId}}),{url:window.canonicalUrl+"?"+n,refPost:i,mode:e}},n}()}).call(this,n("dMdw"),n("Hs9Z"),n("5wds"))},Eama:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r=n("KUml"),i=n("/G9H"),s=n("tX/w"),o=n("vZz4"),a=n("0yP9");let u=class extends i.Component{constructor(){super(...arguments),Object.defineProperty(this,"controller",{enumerable:!0,configurable:!0,writable:!0,value:new a.a}),Object.defineProperty(this,"keepSelectionInView",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:i.createRef()}),Object.defineProperty(this,"handleChange",{enumerable:!0,configurable:!0,writable:!0,value:t=>{this.controller.updateQuery(t.target.value)}}),Object.defineProperty(this,"handleEsc",{enumerable:!0,configurable:!0,writable:!0,value:t=>{"Escape"===t.key&&this.controller.unselect(!0)}}),Object.defineProperty(this,"handleKeyDown",{enumerable:!0,configurable:!0,writable:!0,value:t=>{const e=t.key;"Enter"===e?null==this.controller.selectedItem?this.handleSearch():osu.navigate(Object(o.k)(this.controller.selectedItem.path)):"ArrowUp"!==e&&"ArrowDown"!==e||(this.keepSelectionInView=!0,this.controller.shiftSelectedIndex("ArrowDown"===e?1:-1))}}),Object.defineProperty(this,"handleMouseDown",{enumerable:!0,configurable:!0,writable:!0,value:t=>{null!=this.ref.current&&(t.composedPath().includes(this.ref.current)||this.controller.unselect(!0))}}),Object.defineProperty(this,"handleMouseLeave",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.controller.unselect(!1)}}),Object.defineProperty(this,"handleSearch",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.controller.search()}}),Object.defineProperty(this,"handleSuggestionMouseEnter",{enumerable:!0,configurable:!0,writable:!0,value:t=>{var e;this.keepSelectionInView=!1,this.controller.selectIndex(parseInt(null!==(e=t.currentTarget.dataset.index)&&void 0!==e?e:"",10))}})}componentDidMount(){document.addEventListener("keydown",this.handleEsc),document.addEventListener("mousedown",this.handleMouseDown)}componentDidUpdate(){var e;this.keepSelectionInView&&(null===(e=t(".wiki-search__suggestion--active")[0])||void 0===e||e.scrollIntoView({block:"nearest",inline:"nearest"}),this.keepSelectionInView=!1)}componentWillUnmount(){document.removeEventListener("keydown",this.handleEsc),document.removeEventListener("mousedown",this.handleMouseDown),this.controller.cancel()}render(){return i.createElement("div",{className:"wiki-search"},i.createElement("div",{className:"wiki-search__bar"},i.createElement("input",{autoFocus:!0,className:"wiki-search__input",onChange:this.handleChange,onKeyDown:this.handleKeyDown,placeholder:osu.trans("common.input.search"),value:this.controller.displayText}),i.createElement("button",{className:"wiki-search__button",onClick:this.handleSearch},i.createElement("i",{className:"fa fa-search"}))),this.renderSuggestions())}renderSuggestions(){return this.controller.isSuggestionsVisible?i.createElement("div",{ref:this.ref,className:"wiki-search__suggestions u-fancy-scrollbar",onMouseLeave:this.handleMouseLeave},this.controller.suggestions.map((t,e)=>i.createElement("a",{key:e,className:Object(s.a)("wiki-search__suggestion",{active:this.controller.selectedIndex===e}),"data-index":e,href:Object(o.k)(t.path),onMouseEnter:this.handleSuggestionMouseEnter},i.createElement("span",{dangerouslySetInnerHTML:{__html:t.highlight}})))):null}};u=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}([r.b],u)}).call(this,n("5wds"))},EhQP:function(t,e){window.StoreSupporterTagPrice=function(){function t(t){this._price=t}return t.durationToPrice=function(t){switch(t=+t,!1){case!(t>=12):return Math.ceil(t/12*26);case 10!==t:return 24;case 9!==t:return 22;case 8!==t:return 20;case 6!==t:return 16;case 4!==t:return 12;case 2!==t:return 8;case 1!==t:return 4}},t.prototype.price=function(){return this._price},t.prototype.duration=function(){return null!=this._duration?this._duration:this._duration=function(){switch(!1){case!(this._price>=26):return Math.floor(this._price/26*12);case!(this._price>=24):return 10;case!(this._price>=22):return 9;case!(this._price>=20):return 8;case!(this._price>=16):return 6;case!(this._price>=12):return 4;case!(this._price>=8):return 2;case!(this._price>=4):return 1;default:return 0}}.call(this)},t.prototype.pricePerMonth=function(){return osu.formatNumber(this._price/this.duration(),2)},t.prototype.discount=function(){var t;return this.duration()>=12?46:(t=100*(1-this._price/this.duration()/4),Math.max(0,Math.round(t,0)))},t.prototype.discountText=function(){return osu.trans("store.discount",{percent:this.discount()})},t.prototype.durationInYears=function(){return{years:Math.floor(this.duration()/12),months:Math.floor(this.duration()%12)}},t.prototype.durationText=function(){var t,e;return e=[],(t=this.durationInYears()).years>0&&e.push(osu.transChoice("common.count.years",t.years)),t.months>0&&e.push(osu.transChoice("common.count.months",t.months)),e.join(", ")},t}()},FLFi:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.ChangelogChartLoader=function(){function n(){this.resize=e(this.resize,this),this.initialize=e(this.initialize,this),t(window).on("resize",this.resize),t(document).on("turbolinks:load",this.initialize)}return n.prototype.container=document.getElementsByClassName("js-changelog-chart"),n.prototype.initialize=function(){if(null!=this.container[0])return this.container[0]._chart=new ChangelogChart(this.container[0]),this.container[0]._chart.loadData()},n.prototype.resize=function(){var t;return null!=(t=this.container[0])?t._chart.resize():void 0},n}()}).call(this,n("5wds"))},"Go/u":function(t,e,n){(function(t,e){var n,r,i;i=function(){return StoreCart.setEnabled(!1),t("#username-check-price").text("")},n=function(){var e,r;return e=t("#username-check-status"),r=t(".js-username-change-input").val(),t.post(laroute.route("users.check-username-availability"),{username:r}).done((function(n){if(n.username===t(".js-username-change-input").val())return n.available?(t(".js-store-add-to-cart").attr("disabled",!1),t("#username-check-price").text(n.costString),t("#username-form-price").val(n.cost),t("#product-form").data("disabled",!1)):i(),e.html(n.message),e.toggleClass("green-dark",n.available),e.toggleClass("pink-dark",!n.available)})).fail((function(e,r){return t(".js-username-change-input").trigger("ajax:error",[e,r]).one("click",n)}))},r=e.debounce(n,300),t(document).on("input",".js-username-change-input",(function(e){var n,s,o;return s=e.currentTarget,n=t("#username-check-status"),o=s.value,n.removeClass("green-dark"),n.removeClass("pink-dark"),i(),0===o.length?n.text(osu.trans("store.username_change.check")):(n.text(osu.trans("store.username_change.checking",{username:o})),r())})),t(document).on("turbolinks:load",(function(){if(0!==t(".js-username-change-input").length)return i()}))}).call(this,n("5wds"),n("Hs9Z"))},IBdx:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.TooltipBeatmap=function(){function r(){this.onMouseOver=n(this.onMouseOver,this),e(document).on("mouseover touchstart",".js-beatmap-tooltip",this.onMouseOver)}return r.prototype.tmpl=t.template('<div class="tooltip-beatmap__text tooltip-beatmap__text--title"><%- beatmapTitle %></div><div class="tooltip-beatmap__text" style="--diff: var(--diff-<%- difficulty %>)"><%- stars %> <i class="fas fa-star" aria-hidden="true"></i></div>'),r.prototype.onMouseOver=function(t){var n,r,i,s,o;if(null!=(i=t.currentTarget).dataset.beatmapTitle){if(r=this.tmpl(i.dataset),!i._tooltip)return n=null!=(o=i.dataset.tooltipPosition)?o:"top center",s={overwrite:!1,content:r,position:{my:function(){switch(n){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),at:n,viewport:e(window)},show:{event:t.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:"qtip tooltip-beatmap",tip:{width:10,height:9}}},"touchstart"===t.type&&(s.hide={inactive:3e3,event:"unfocus"}),e(i).qtip(s,t),i._tooltip=!0;e(i).qtip("set",{"content.text":r})}},r}()}).call(this,n("Hs9Z"),n("5wds"))},ICEo:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumTopicPostJump=function(){function n(n){this.forum=n,this.start=e(this.start,this),this.keyup=e(this.keyup,this),this.end=e(this.end,this),t(document).on("click",".js-forum-topic-post-jump--cover",this.start),t(document).on("blur",".js-forum-topic-post-jump--input",this.end),t(document).on("keyup",".js-forum-topic-post-jump--input",this.keyup),t.subscribe("forum:topic:jumpTo",this.end)}return n.prototype.end=function(){return t(".js-forum-topic-post-jump--container").removeClass("js-forum-topic-post-jump--container-focus"),t(".js-forum-topic-post-jump--cover").show(),t(".js-forum-topic-post-jump--counter").show(),t(".js-forum-topic-post-jump--input").hide()},n.prototype.keyup=function(e){var n,r,i;if(27!==e.keyCode){if(r=(i=(n=e.currentTarget).value).replace(/\D/g,""),i!==r)return n.value=r}else t(e.currentTarget).blur()},n.prototype.start=function(){var e;return t(".js-forum-topic-post-jump--container").addClass("js-forum-topic-post-jump--container-focus"),t(".js-forum-topic-post-jump--cover").hide(),t(".js-forum-topic-post-jump--counter").hide(),(e=t(".js-forum-topic-post-jump--input").val(this.forum.currentPostPosition).show().focus())[0].selectionStart=0,e[0].selectionEnd=e.val().length},n}()}).call(this,n("5wds"))},IJoN:function(t,e,n){"use strict";var r=n("lv9K"),i=n("KUml"),s=n("JlDh"),o=n("NnvF"),a=n("f4vq"),u=n("/G9H"),l=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let c=class extends u.Component{get unreadCount(){return s.c.filter(t=>!(null==t||"channel"===t)).reduce((t,e)=>t+a.a.dataStore.notificationStore.unreadStacks.getOrCreateType({objectType:e}).total,0)}get unreadLegacyPmCount(){var t,e;return null!==(e=null===(t=a.a.currentUser)||void 0===t?void 0:t.unread_pm_count)&&void 0!==e?e:0}constructor(t){super(t),Object(r.p)(this)}render(){return u.createElement(o.a,{count:this.unreadCount+this.unreadLegacyPmCount,iconClassName:"fas fa-inbox",ready:a.a.notificationsWorker.hasData,type:this.props.type})}};l([r.h],c.prototype,"unreadCount",null),c=l([i.b],c),e.a=c},JER7:function(t,e,n){"use strict";(function(t){var e=n("/DQ7"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumPostsSeek=function(){function n(e){this.forum=e,this.setPostPosition=r(this.setPostPosition,this),this.reset=r(this.reset,this),this.jump=r(this.jump,this),this.click=r(this.click,this),this.move=r(this.move,this),this.hideTooltip=r(this.hideTooltip,this),this.tooltip=document.getElementsByClassName("js-forum-posts-seek--tooltip"),this.tooltipNumber=document.getElementsByClassName("js-forum-posts-seek-tooltip-number"),this.seekbar=document.getElementsByClassName("js-forum__posts-seek"),t(document).on("mousemove",".js-forum__posts-seek",this.move),t(document).on("mouseleave",".js-forum__posts-seek",this.hideTooltip),t(document).on("click",".js-forum__posts-seek",this.click),t(document).on("click",".js-forum-posts-seek--jump",this.jump),addEventListener("turbolinks:before-cache",this.reset)}return n.prototype.hideTooltip=function(){if(0!==this.tooltip.length)return Object(e.b)(this.tooltip[0])},n.prototype.move=function(t){return t.preventDefault(),t.stopPropagation(),this.setPostPosition(t.clientX),Object(e.a)(this.tooltip[0]),Timeout.clear(this._autohide),this._autohide=Timeout.set(1e3,this.hideTooltip)},n.prototype.click=function(){return this.forum.jumpTo(this.postPosition)},n.prototype.jump=function(e){var n,r,i,s,o,a,u,l;return e.preventDefault(),r=this.forum.currentPostPosition,l=this.forum.totalPosts(),n=t(e.currentTarget),s=n.attr("data-jump-target"),u=function(){switch(s){case"first":return 1;case"last":return l;case"previous":return i=r-10,a=this.forum.postPosition(this.forum.posts[0]),Math.max(i,a);case"next":return i=r+10,o=this.forum.postPosition(this.forum.endPost()),Math.min(i,o)}}.call(this),n.blur(),this.forum.jumpTo(u)},n.prototype.reset=function(){return Timeout.clear(this._autohide),this.hideTooltip()},n.prototype.setPostPosition=function(t){var e,n,r;return e=t/this.seekbar[0].offsetWidth,r=this.forum.totalPosts(),n=Math.ceil(e*this.forum.totalPosts()),n=Math.min(n,r),this.postPosition=Math.max(n,1),this.tooltip[0].style.transform="translateX("+t+"px)",this.tooltipNumber[0].textContent=this.postPosition},n}()}).call(this,n("5wds"))},JXhK:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.StoreSupporterTag=function(){function r(r){var i;this.updateUserInteraction=n(this.updateUserInteraction,this),this.updateTargetId=n(this.updateTargetId,this),this.updateSearchResult=n(this.updateSearchResult,this),this.updateCostDisplay=n(this.updateCostDisplay,this),this.onInput=n(this.onInput,this),this.onSliderValueChanged=n(this.onSliderValueChanged,this),this.calculate=n(this.calculate,this),this.getUser=n(this.getUser,this),this.initializeUsernameInput=n(this.initializeUsernameInput,this),this.initializeSliderPresets=n(this.initializeSliderPresets,this),this.initializeSlider=n(this.initializeSlider,this),this.debouncedGetUser=t.debounce(this.getUser,300),this.el=r,this.searching=!1,this.priceElement=this.el.querySelector(".js-price"),this.durationElement=this.el.querySelector(".js-duration"),this.discountElement=this.el.querySelector(".js-discount"),this.slider=this.el.querySelector(".js-slider"),this.sliderPresets=this.el.querySelectorAll(".js-slider-preset"),this.targetIdElement=this.el.querySelector('input[name="item[extra_data][target_id]"]'),this.usernameInput=this.el.querySelector(".js-username-input"),this.reactElement=this.el.querySelector(".js-react--user-card-store"),this.user=JSON.parse(this.reactElement.dataset.user),null==this.user&&(this.user=currentUser,this.reactElement.dataset.user=JSON.stringify(this.user)),e(document).one("turbolinks:before-cache",(i=this,function(){return i.reactElement.dataset.user=JSON.stringify(i.user)})),this.cost=this.calculate(this.initializeSlider().slider("value")),this.initializeSliderPresets(),this.initializeUsernameInput(),this.updateCostDisplay(),this.updateSearchResult()}return r.prototype.RESOLUTION=8,r.prototype.MIN_VALUE=4,r.prototype.MAX_VALUE=52,r.initialize=function(){var t,e,n,i,s;for(s=[],e=0,n=(i=document.getElementsByClassName("js-store-supporter-tag")).length;e<n;e++)t=i[e],s.push(new r(t));return s},r.prototype.initializeSlider=function(){var t;return e(this.slider).find(".ui-slider-range").remove(),e(this.slider).slider({range:"min",value:null!=(t=this.slider.dataset.lastValue)?t:this.sliderValue(this.MIN_VALUE),min:this.sliderValue(this.MIN_VALUE),max:this.sliderValue(this.MAX_VALUE),step:1,animate:!0,slide:this.onSliderValueChanged,change:this.onSliderValueChanged})},r.prototype.initializeSliderPresets=function(){return e(this.sliderPresets).on("click",(t=this,function(n){var r,i;if(i=n.currentTarget,r=StoreSupporterTagPrice.durationToPrice(i.dataset.months))return e(t.slider).slider("value",t.sliderValue(r))}));var t},r.prototype.initializeUsernameInput=function(){return e(this.usernameInput).on("input",this.onInput)},r.prototype.getUser=function(t){return t?e.ajax({data:{username:t},dataType:"json",type:"POST",url:laroute.route("users.check-username-exists")}).done((n=this,function(t){return n.user=t})).fail(function(t){return function(n,r){return e(t.usernameInput).trigger("ajax:error",[n,r]).one("click",t.onInput)}}(this)).always(function(t){return function(){return t.searching=!1,t.updateSearchResult()}}(this)):(this.user=window.currentUser,this.searching=!1,void this.updateSearchResult());var n},r.prototype.calculate=function(t){return new StoreSupporterTagPrice(Math.floor(t/this.RESOLUTION))},r.prototype.onSliderValueChanged=function(t,e){return this.slider.dataset.lastValue=e.value,this.cost=this.calculate(e.value),this.updateCostDisplay()},r.prototype.onInput=function(t){return this.searching||(this.searching=!0,this.user=null,this.updateSearchResult()),this.debouncedGetUser(t.currentTarget.value)},r.prototype.sliderValue=function(t){return t*this.RESOLUTION},r.prototype.updateCostDisplay=function(){var t,e,n,r,i;for(this.el.querySelector('input[name="item[cost]"]').value=this.cost.price(),this.priceElement.textContent="USD "+this.cost.price(),this.durationElement.textContent=this.cost.durationText(),this.discountElement.textContent=this.cost.discountText(),i=[],e=0,n=(r=this.sliderPresets).length;e<n;e++)t=r[e],i.push(this.updateSliderPreset(t,this.cost));return i},r.prototype.updateSearchResult=function(){return e.publish("store-supporter-tag:update-user",this.user),this.updateTargetId(),this.updateUserInteraction()},r.prototype.updateSliderPreset=function(t,n){return e(t).toggleClass("js-slider-preset--active",n.duration()>=+t.dataset.months)},r.prototype.updateTargetId=function(){var t;return this.targetIdElement.value=null!=(t=this.user)?t.id:void 0},r.prototype.updateUserInteraction=function(){var t,n;return t=null!=(null!=(n=this.user)?n.id:void 0)&&Number.isFinite(this.user.id)&&this.user.id>0,StoreCart.setEnabled(t),e(this.el).toggleClass("js-store--disabled",!t),e(".js-slider").slider({disabled:!t})},r}()}).call(this,n("Hs9Z"),n("5wds"))},K1Kf:function(t,e,n){(function(t){var e;t(document).on("click","#new-address-switch a",(function(e){var n,r;return e.preventDefault(),r=t(e.target),n=t("#new-address-form"),r.is(":visible")?(r.siblings("button").show(),r.hide(),n.find("input").first().focus()):(r.siblings("button").hide(),r.show()),n.slideToggle()})),e=function(){return t(".js-checkout-confirmation-step").filter(":checked")},t(document).on("turbolinks:load",e),t(document).on("change",".js-checkout-confirmation-step",e),t(document).on("turbolinks:load",(function(){if(!(parseInt(t(".js-store-item-quantity").val(),10)>0))return t(".js-store-add-to-cart").hide()})),t(document).on("turbolinks:load",(function(){return t("#product-form").submit((function(e){return!t(e.target).data("disabled")}))}))}).call(this,n("5wds"))},Kd0U:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;window.FormError=function(){function i(){this.setOneError=n(this.setOneError,this),this.setError=n(this.setError,this),this.showError=n(this.showError,this),this.flattenData=n(this.flattenData,this),this.clearError=n(this.clearError,this),t(document).on("ajax:error",".js-form-error",this.showError),t(document).on("ajax:success",".js-form-error",this.clearError)}return i.prototype.clearError=function(t){return this.setError(t.target)},i.prototype.flattenData=function(t,n){var i,s,o,a,u,l,c,h;for(u in null==n&&(n=[]),i={},t)if(r.call(t,u))if(h=t[u],Array.isArray(h)){for(s="",o=a=0,l=n.length;a<l;o=++a)c=n[o],s+=0===o?c:"["+c+"]";i[s+=""===s?u:"["+u+"]"]=h}else h instanceof Object&&e.merge(i,this.flattenData(h,n.concat(u)));return i},i.prototype.showError=function(t,e){var n,r;return null==(n=null!=(r=e.responseJSON)?r.form_error:void 0)?osu.ajaxError(e):this.setError(t.target,this.flattenData(n))},i.prototype.setError=function(e,n){return null==n&&(n={}),t(e).find("[name]").each((r=this,function(t,e){return r.setOneError(e,n[e.name])}));var r},i.prototype.setOneError=function(e,n){var r;return null==n&&(n=[]),r=n.length>0?"error":"",t(e).closest("label, .js-form-error--field").attr("data-form-error-state",r).find(".js-form-error--error").text(n.join(" "))},i}()}).call(this,n("5wds"),n("Hs9Z"))},L6Lm:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.LandingGraph=function(){function n(){this.resize=e(this.resize,this),this.initialize=e(this.initialize,this),t(window).on("resize",this.resize),t(document).on("turbolinks:load",this.initialize)}return n.prototype.container=document.getElementsByClassName("js-landing-graph"),n.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new LandingUserStats},n.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},n}()}).call(this,n("5wds"))},LgLm:function(t,e,n){(function(t,e,n){var r=function(t,e){return function(){return t.apply(e,arguments)}};window.Search=function(){function i(){this.restoreFocus=r(this.restoreFocus,this),this.searchingToggle=r(this.searchingToggle,this),this.submit=r(this.submit,this),this.submitForm=r(this.submitForm,this),this.submitInput=r(this.submitInput,this),this.maybeSubmitInput=r(this.maybeSubmitInput,this),this.forumPostReset=r(this.forumPostReset,this),this.debouncedSubmitInput=t.debounce(this.submitInput,500),e(document).on("click",".js-search--forum-options-reset",this.forumPostReset),e(document).on("input",".js-search--input",this.debouncedSubmitInput),e(document).on("keydown",".js-search--input",this.maybeSubmitInput),e(document).on("submit",".js-search",this.submitForm),addEventListener("turbolinks:load",this.restoreFocus)}return i.prototype.forumPostReset=function(){var t;return(t=e(".js-search")).find("[name=username], [name=forum_id]").val(""),t.find("[name=forum_children]").prop("checked",!1)},i.prototype.maybeSubmitInput=function(t){if(13===t.keyCode)return t.preventDefault(),this.submitInput(t)},i.prototype.submitInput=function(t){var e,n,r;if(""!==(r=(e=t.currentTarget).value.trim())&&r!==(null!=(n=e.dataset.searchCurrent)?n.trim():void 0))return e.dataset.searchCurrent=r,this.submit()},i.prototype.submitForm=function(t){return t.preventDefault(),this.submit()},i.prototype.submit=function(){var t,r;return this.searchingToggle(!0),t=e(".js-search").serialize(),e(document).one("turbolinks:before-cache",(r=this,function(){return r.activeElement=document.activeElement,r.searchingToggle(!1)})),n.visit("?"+t)},i.prototype.searchingToggle=function(t){return e(".js-search--header").toggleClass("js-search--searching",t)},i.prototype.restoreFocus=function(){var t;return null!=(t=this.activeElement)&&t.focus(),this.activeElement=null},i}()}).call(this,n("Hs9Z"),n("5wds"),n("dMdw"))},Lv69:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));var r=n("/G9H"),i=n("I8Ok"),s=n("MeXQ"),o=n("vZz4"),a=function(t,e){return function(){return t.apply(e,arguments)}},u={}.hasOwnProperty,l=function(e){function n(){return this.renderOption=a(this.renderOption,this),this.render=a(this.render,this),this.handleChange=a(this.handleChange,this),n.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)u.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.handleChange=function(e){return t.visit(this.href(e.id))},n.prototype.href=function(t){return Object(o.i)(null,{spotlight:t})},n.prototype.render=function(){return Object(r.createElement)(s.a,{bn:"spotlight-select-options",renderOption:this.renderOption,onChange:this.handleChange,options:this.props.options,selected:this.props.selected})},n.prototype.renderOption=function(t){var e,n,r,s;return e=t.children,n=t.cssClasses,r=t.onClick,s=t.option,Object(i.a)({children:e,className:n,href:this.href(null!=s?s.id:void 0),key:null!=s?s.id:void 0,onClick:r})},n}(r.PureComponent)}).call(this,n("dMdw"))},MRAD:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.PostPreview=function(){function r(){var r;this.loadPreview=n(this.loadPreview,this),this.debouncedLoadPreview=t.debounce(this.loadPreview,500),e(document).on("input",".js-post-preview--auto",(r=this,function(t){return r.debouncedLoadPreview(t.currentTarget)}))}return r.prototype.loadPreview=function(t){var n,r,i,s,o,a;if(n=e(t).closest("form"),s=t.value,o=(r=n.find(".js-post-preview--preview"))[0],i=n.find(".js-post-preview--box"),null!=o)if(null!=(a=o._xhr)&&a.abort(),""!==s){if(r.attr("data-raw")!==s)return o._xhr=e.post(laroute.route("bbcode-preview"),{text:s}).done((function(t){return r.html(t),r.attr("data-raw",s),i.removeClass("hidden"),_exported.pageChange()}));i.removeClass("hidden")}else i.addClass("hidden")},r}()}).call(this,n("Hs9Z"),n("5wds"))},MWnb:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;window.StackedBarChart=function(){function i(e,r){var i,s,o,a,u,l,c;for(this.area=e,this.options=null!=r?r:{},this.resize=n(this.resize,this),this.reattach=n(this.reattach,this),this.margins={top:0,right:0,bottom:0,left:0},null==(i=this.options).scales&&(i.scales={}),null==(s=this.options.scales).x&&(s.x=t.scaleLinear()),null==(o=this.options.scales).y&&(o.y=t.scaleLinear()),a="stacked-bar-chart",u=0,l=(c=this.options.modifiers).length;u<l;u++)a+=" stacked-bar-chart--"+c[u];this.svg=t.select(this.area).append("svg").attr("class",a),this.svgWrapper=this.svg.append("g")}return i.prototype.loadData=function(n){var i,s,o,a,u,l;for(o in this.data=[],n)if(r.call(n,o))for(u in a=n[o])r.call(a,u)&&(l=a[u],null==(i=this.data)[u]&&(i[u]=[]),s=e.last(this.data[u]),this.data[u].push({type:o,value:l,height:null!=s?s.value+s.height:0}));return this.max=t.max(e.map(this.data,(function(t){return e.sumBy(t,"value")}))),this.resize()},i.prototype.reattach=function(t){if(null!=t&&t!==this.area)return this.area=t,this.area.append(this.svg.node())},i.prototype.setDimensions=function(){var t;return t=this.area.getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},i.prototype.setScalesRange=function(){return this.options.scales.x.range([0,this.width]).domain([0,this.data.length]),this.options.scales.y.range([0,this.height]).domain([0,Math.max(this.max,1)])},i.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},i.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},i.prototype.drawBars=function(){var t,e,n;return(e=this.svgWrapper.selectAll("g").data(this.data)).enter().append("g"),e.attr("transform",(n=this,function(t,e){return"translate("+n.options.scales.x(e)+", 0)"})),(t=e.selectAll(".stacked-bar-chart__bar").data((function(t){return t}))).enter().append("rect").attr("class",(function(t){return"stacked-bar-chart__bar stacked-bar-chart__bar--"+t.type})).attr("width",this.options.scales.x(1)).attr("y",this.height),t.transition().attr("y",function(t){return function(e){return t.height-t.options.scales.y(e.value+e.height)}}(this)).attr("height",function(t){return function(e){return t.options.scales.y(e.value)}}(this)),t.exit().remove(),e.exit().remove()},i.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.drawBars()},i}()}).call(this,n("kUxX"),n("Hs9Z"))},NnvF:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var r=n("/G9H"),i=n("tX/w");function s(t){const e={glow:t.count>0,mobile:"mobile"===t.type};return r.createElement("span",{className:Object(i.a)("notification-icon",e)},r.createElement("i",{className:t.iconClassName}),r.createElement("span",{className:"notification-icon__count"},t.ready?(n=t.count,osu.formatNumber(n>0?n:0)):"..."));var n}},"Nqw+":function(t,e,n){"use strict";(function(t){var e=n("/jJF"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.AccountEditAvatar=function(){function n(){this.rollback=r(this.rollback,this),this.overlayStart=r(this.overlayStart,this),this.overlayLeave=r(this.overlayLeave,this),this.overlayHover=r(this.overlayHover,this),this.overlayEnter=r(this.overlayEnter,this),this.overlayEnd=r(this.overlayEnd,this),this.initialize=r(this.initialize,this),t(document).on("turbolinks:load",this.initialize),t(document).on("turbolinks:before-cache",this.rollback),t.subscribe("dragenterGlobal",this.overlayStart),t.subscribe("dragendGlobal",this.overlayEnd),t(document).on("dragenter",".js-account-edit-avatar",this.overlayEnter),t(document).on("dragover",".js-account-edit-avatar",this.overlayHover),this.main=document.getElementsByClassName("js-account-edit-avatar")}return n.prototype.$button=function(){return t(".js-account-edit-avatar__button")},n.prototype.initialize=function(){var n;if(null!=this.main[0])return this.isAvailable=!0,this.$main=t(this.main),this.$button().fileupload({url:laroute.route("account.avatar"),dataType:"json",dropZone:this.$main,submit:(n=this,function(){return n.main[0].classList.add("js-account-edit-avatar--saving"),t.publish("dragendGlobal")}),done:function(e,n){return t.publish("user:update",n.result)},fail:e.b,complete:function(t){return function(){return t.main[0].classList.remove("js-account-edit-avatar--saving")}}(this)})},n.prototype.overlayEnd=function(){if(this.isAvailable)return this.main[0].classList.remove("js-account-edit-avatar--start")},n.prototype.overlayEnter=function(){return null!=this.dragging?this.dragging:this.dragging=!0},n.prototype.overlayHover=function(){if(this.dragging)return this.main[0].classList.add("js-account-edit-avatar--hover"),Timeout.clear(this.overlayLeaveTimeout),this.overlayLeaveTimeout=Timeout.set(100,this.overlayLeave)},n.prototype.overlayLeave=function(){return this.dragging=null,this.main[0].classList.remove("js-account-edit-avatar--hover")},n.prototype.overlayStart=function(){if(this.isAvailable)return this.main[0].classList.add("js-account-edit-avatar--start")},n.prototype.rollback=function(){if(this.isAvailable)return this.isAvailable=!1,this.$button().fileupload("destroy")},n}()}).call(this,n("5wds"))},NrCJ:function(t,e,n){"use strict";(function(t,r){var i=n("hbiH"),s=n("+aIE"),o=n.n(s),a=n("VZ9T"),u=n.n(a),l=n("/DQ7"),c=function(t,e){return function(){return t.apply(e,arguments)}};e.a=function(){function e(){this.switchPreview=c(this.switchPreview,this),this.thumbBoundsFn=c(this.thumbBoundsFn,this),this.open=c(this.open,this),this.initiateOpen=c(this.initiateOpen,this),this.container=document.getElementsByClassName("pswp"),t(document).on("click",".js-gallery",this.initiateOpen),t(document).on("click",".js-gallery-thumbnail",this.switchPreview),t(document).on("turbolinks:before-cache",(function(){return t(".js-gallery--container").remove()}))}return e.prototype.initiateOpen=function(e){var n,r,i;if(!(n=t(e.currentTarget)).parents("a").length)return e.preventDefault(),i=parseInt(n.attr("data-index"),10),r=n.attr("data-gallery-id"),this.open({galleryId:r,index:i})},e.prototype.open=function(e){var n,s,a,l;return s=e.galleryId,a=e.index,(n=this.container[0].cloneNode(!0)).classList.add("js-gallery--container"),document.body.appendChild(n),l=new o.a(n,u.a,this.data(s),{showHideOpacity:!0,getThumbBoundsFn:this.thumbBoundsFn(s),index:a,history:!1,timeToIdle:null}),r.startsWith(s,"contest-")&&new i.a(n,l),l.init(),t(document).one("gallery:close",(function(){try{return l.close()}catch(t){}}))},e.prototype.data=function(t){var e,n,r,i,s,o,a;for(o=[],n=0,r=(i=document.querySelectorAll(".js-gallery[data-gallery-id='"+t+"']")).length;n<r;n++)a=null!=(s=(e=i[n]).getAttribute("data-src"))?s:e.getAttribute("href"),o.push({element:e,msrc:a,src:a,w:parseInt(e.getAttribute("data-width"),10),h:parseInt(e.getAttribute("data-height"),10)});return o},e.prototype.thumbBoundsFn=function(e){return function(n){var r,i,s,o,a,u,l;return l=(r=t(".js-gallery[data-gallery-id='"+e+"'][data-index='"+n+"']")).offset(),u=[r.width(),r.height()],i=[l.left+u[0]/2,l.top+u[1]/2],s=[parseInt(r.attr("data-width"),10),parseInt(r.attr("data-height"),10)],o=Math.max(u[0]/s[0],u[1]/s[1]),a=s.map((function(t){return t*o})),{x:i[0]-a[0]/2,y:i[1]-a[1]/2,w:a[0]}}},e.prototype.switchPreview=function(e){var n,i,s,o,a,u,c,h,d,p;for(e.preventDefault(),s=(h=t(e.currentTarget)[0].dataset).galleryId,o=h.index,i=t(".js-gallery[data-gallery-id='"+s+"']"),n=t(".js-gallery-thumbnail[data-gallery-id='"+s+"']"),p=[],a=0,u=(d=r.zip(n,i)).length;a<u;a++)o===(c=d[a])[0].dataset.index?(c[0].classList.add("js-gallery-thumbnail--active"),p.push(Object(l.a)(c[1]))):(c[0].classList.remove("js-gallery-thumbnail--active"),p.push(Object(l.b)(c[1])));return p},e}()}).call(this,n("5wds"),n("Hs9Z"))},"Ny+b":function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.TurbolinksUjs=function(){function n(){this.record=e(this.record,this),this.abort=e(this.abort,this),this.xhr=[],t(document).on("ajax:beforeSend",this.record),t(document).on("turbolinks:before-cache",this.abort)}return n.prototype.abort=function(){var t,e;for(t=[];e=this.xhr.pop();)t.push(null!=e?e.abort():void 0);return t},n.prototype.record=function(t,e){return this.xhr.push(e)},n}()}).call(this,n("5wds"))},Os89:function(t,e,n){(function(t){t(document).on("click",".js-spoilerbox__link",(function(e){return e.preventDefault(),t(e.target).closest(".js-spoilerbox").toggleClass("js-spoilerbox--open"),_exported.pageChange()}))}).call(this,n("5wds"))},PBOi:function(t,e,n){"use strict";(function(t,e,r){var i=n("/DQ7"),s=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;window.ChangelogChart=function(){function n(e){var n;this.resize=s(this.resize,this),this.positionTooltip=s(this.positionTooltip,this),this.moveTooltip=s(this.moveTooltip,this),this.hideTooltip=s(this.hideTooltip,this),this.showTooltip=s(this.showTooltip,this),this.options={scales:{x:t.scaleTime(),y:t.scaleLinear(),class:t.scaleOrdinal()}},this.area=t.select(e),this.area.classed("changelog-chart",!0),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g"),this.areaFunction=t.area().curve(t.curveMonotoneX).x((n=this,function(t){return n.options.scales.x(t.data.date)})).y1(function(t){return function(e){return t.options.scales.y(e[1])}}(this)).y0(function(t){return function(e,n){return t.options.scales.y(e[0])}}(this)),this.hoverArea=this.svg.append("rect").classed("changelog-chart__hover-area",!0).on("mouseout",this.hideTooltip).on("mousemove",this.moveTooltip),this.tooltipArea=this.area.append("div").classed("changelog-chart__tooltip-area",!0),this.tooltipContainer=this.tooltipArea.append("div").classed("changelog-chart__tooltip-container",!0).attr("data-visibility","hidden"),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltip=this.tooltipContainer.append("div").classed("changelog-chart__tooltip",!0),this.tooltipName=this.tooltip.append("div"),this.tooltipUserCount=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--user-count",!0),this.tooltipDate=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--date",!0),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltipLine=this.tooltipContainer.selectAll(".changelog-chart__tooltip-line")}return n.prototype.loadData=function(){var e,n,r,i;return this.config=_exported.parseJson("json-chart-config"),e=(r=this.normalizeData(this.config.build_history)).data,n=r.hasData,i=t.stack().keys(this.config.order).value((function(t,e){return null!=t[e]?t[e].normalized:0})),this.data=i(e),this.hasData=null!=this.config.build_history&&this.config.build_history.length>0&&n,this.resize()},n.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width,this.height=t.height},n.prototype.setSvgSize=function(){return this.svg.attr("width",this.width).attr("height",this.height)},n.prototype.setHoverAreaSize=function(){return this.hoverArea.attr("width",this.width).attr("height",this.height)},n.prototype.setScalesRange=function(){var t,n,r;return this.options.scales.x.range([0,this.width]).domain([null!=(t=e.first(this.data[0]))?t.data.date:void 0,null!=(n=e.last(this.data[0]))?n.data.date:void 0]),this.options.scales.y.range([0,this.height]).domain([0,1]),this.options.scales.class.range(e.map(this.config.order,(r=this,function(t,n){return null!=r.config.stream_name?r.config.stream_name+"-build-"+n%7:e.kebabCase(t)}))).domain(this.config.order)},n.prototype.drawLines=function(){return this.svgWrapper.selectAll("g").data(this.data).enter().append("path").attr("class",(t=this,function(e){return"changelog-chart__area changelog-chart__area--"+t.options.scales.class(e.key)})).attr("d",this.areaFunction);var t},n.prototype.showTooltip=function(){return Object(i.a)(this.tooltipContainer.node())},n.prototype.hideTooltip=function(){return Object(i.b)(this.tooltipContainer.node())},n.prototype.moveTooltip=function(e){var n;return n=t.pointer(e),this.x=this.options.scales.x.invert(n[0]),this.y=n[1]/this.height,this.showTooltip(),Timeout.clear(this._autoHideTooltip),this._autoHideTooltip=Timeout.set(3e3,this.hideTooltip),this.positionTooltip()},n.prototype.positionTooltip=function(){var e,n,r,i,s,o,a,u,l,c,h,d,p,f,m;if(f=this.x,m=this.y,null!=f&&null!=(l=t.bisector((function(t){return t.data.date})).left(this.data[0],f))){for(s=o=0,u=(c=this.data).length;o<u;s=++o)if(m<=(i=c[s])[l][1]&&null!=i[l].data[i.key]){r=s,n=i.key,a=this.options.scales.class(n);break}return e=this.options.scales.x(f),this.tooltipName.attr("class","changelog-chart__text changelog-chart__text--name changelog-chart__text--"+a).text(n),this.tooltipUserCount.text(osu.formatNumber(this.data[r][l].data[n].user_count)),this.tooltipDate.text(this.data[r][l].data.date_formatted),d=(p=e-(h=this.tooltip.node().getBoundingClientRect().width)/2)<0?0:p+h>this.width?this.width-h:p,this.tooltip.style("transform","translateX("+d+"px)"),this.tooltipLine.style("transform","translateX("+e+"px)")}},n.prototype.resize=function(){if(this.area.classed("hidden",!this.hasData),this.hasData)return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setHoverAreaSize(),this.drawLines(),this.positionTooltip()},n.prototype.normalizeData=function(t){var n,i,s,a,u,l,c,h,d;return u=null,i=null,{data:function(){var p,f,m,g;for(c in g=[],m=e.groupBy(t,"created_at"))if(o.call(m,c)){for(d=m[c],0===(l=e.sumBy(d,"user_count"))?(null!=u&&(n=e.find(d,{label:u})),null==n&&(n=e.last(d),u=n.label),n.user_count=1,l=1):null==i&&(i=!0),s=r(d[0].created_at),a={created_at:c,date:s.toDate(),date_formatted:s.format("YYYY/MM/DD")},p=0,f=d.length;p<f;p++)(h=d[p]).normalized=h.user_count/l,a[h.label]=h;g.push(a)}return g}(),hasData:i}},n}()}).call(this,n("kUxX"),n("Hs9Z"),n("7EfK"))},Q9e0:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.StickyFooter=function(){function r(){this.stickOrUnstick=n(this.stickOrUnstick,this),this.stickMarker=document.getElementsByClassName("js-sticky-footer"),this.permanentFixedFooter=document.getElementsByClassName("js-permanent-fixed-footer"),this.throttledStickOrUnstick=t.throttle(this.stickOrUnstick,100),e(window).on("scroll resize",this.stickOrUnstick),e.subscribe("stickyFooter:check",this.throttledStickOrUnstick),e(document).on("turbolinks:load",this.throttledStickOrUnstick),e.subscribe("osu:page:change",this.throttledStickOrUnstick)}return r.prototype.stickOrUnstick=function(){var t,n,r,i,s;if(0!==this.stickMarker.length){for(t=window.innerHeight-this.permanentFixedFooter[0].offsetHeight,n=0,r=(s=this.stickMarker).length;n<r;n++)if("1"!==(i=s[n]).getAttribute("data-sticky-footer-disabled")&&i.getBoundingClientRect().top>=t)return void e.publish("stickyFooter",i.getAttribute("data-sticky-footer-target"));return e.publish("stickyFooter")}},r.prototype.markerCheckEnabled=function(t){return"1"===t.getAttribute("data-sticky-footer-disabled")},r.prototype.markerDisable=function(t){return t.setAttribute("data-sticky-footer-disabled","1")},r.prototype.markerEnable=function(t){return t.setAttribute("data-sticky-footer-disabled","")},r}()}).call(this,n("Hs9Z"),n("5wds"))},QT2p:function(t,e,n){"use strict";(function(t){var e,r=n("5wds"),i=(n("9A9O"),n("W4WA"),n("1c9v"),n("vF7a"),n("eOdp"),n("sko/"),n("ijPu"),n("7EVi"),n("/nYO"),n("sebX")),s=n("nLpH"),o=n.n(s),a=n("lv9K"),u=n("7EfK");window.$=r,window.jQuery=r,null!==(e=window.LangMessages)&&void 0!==e||(window.LangMessages={}),window.Lang=Object(i.a)(new o.a({fallback:window.fallbackLocale,locale:window.currentLocale,messages:window.LangMessages})),window.moment=u,window.Turbolinks=t,window._styles={header:{height:90,heightMobile:50,heightSticky:50}},Object(a.i)({computedRequiresReaction:!0})}).call(this,n("dMdw"))},SpnN:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return l}));var r=n("0h6b"),i=n("Hs9Z"),s=n("lv9K"),o=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};const a=["user","user_others","beatmapset","beatmapset_others","others"],u=["forum_post","wiki_page"];class l{constructor(){Object.defineProperty(this,"debouncedSearch",{enumerable:!0,configurable:!0,writable:!0,value:Object(i.debounce)(this.search,500)}),Object.defineProperty(this,"query",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"searchResult",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"searching",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"selected",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"xhr",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object(s.p)(this)}cycleSelectedItem(t){let e;if(this.selected)(e=Object.assign({},this.selected)).index+=t;else if(t>0)e={index:0,section:0};else{const t=a.length-1,n=a[t];e={index:this.sectionLength(n)-1,section:t}}if(e.index<0||e.index>=this.sectionLength(a[e.section])){let n=e.section;do{if((n=(n+t)%a.length)<0&&(n=a.length+n),n===e.section)return}while(0===this.sectionLength(a[n]));e={index:t>0?0:this.sectionLength(a[n])-1,section:n}}this.selected=e}get currentSection(){if(this.selected)return a[this.selected.section]}get selectedURL(){var t,e;const n=this.searchResult;if(this.selected&&n)switch(a[this.selected.section]){case"user":{const e=null===(t=n.user.users[this.selected.index])||void 0===t?void 0:t.id;return e?Object(r.route)("users.show",{user:e}):void 0}case"user_others":return Object(r.route)("search",{mode:"user",query:this.query});case"beatmapset":{const t=null===(e=n.beatmapset.beatmapsets[this.selected.index])||void 0===e?void 0:e.id;return t?Object(r.route)("beatmapsets.show",{beatmapset:t}):void 0}case"beatmapset_others":return Object(r.route)("search",{mode:"beatmapset",query:this.query});case"others":{const t=u.filter(t=>n[t].total>0)[this.selected.index];return Object(r.route)("search",{mode:t,query:this.query})}}}search(){const e=this.query.trim();0!==e.length?(this.searching=!0,this.xhr=t.get(Object(r.route)("quick-search"),{query:e}).done(Object(s.f)(t=>{this.searchResult=t,this.selected=null})).always(Object(s.f)(()=>{this.searching=!1}))):this.reset()}selectNone(){this.selected=null}setSelected(t,e){this.selected={index:e,section:a.indexOf(t)}}updateQuery(t){this.query=t,this.selected=null,this.debouncedSearch()}reset(){this.debouncedSearch.cancel(),null!=this.xhr&&this.xhr.abort(),this.searching=!1,this.searchResult=null,this.selected=null}sectionLength(t){const e=this.searchResult;if(!e)return 0;switch(t){case"user":return e.user.users.length;case"user_others":return e.user.total>e.user.users.length?1:0;case"beatmapset":return e.beatmapset.beatmapsets.length;case"beatmapset_others":return 1;case"others":return u.filter(t=>e[t].total>0).length}return 0}}o([s.q],l.prototype,"query",void 0),o([s.q],l.prototype,"searchResult",void 0),o([s.q],l.prototype,"searching",void 0),o([s.q],l.prototype,"selected",void 0),o([s.f],l.prototype,"cycleSelectedItem",null),o([s.h],l.prototype,"currentSection",null),o([s.h],l.prototype,"selectedURL",null),o([s.f],l.prototype,"search",null),o([s.f],l.prototype,"selectNone",null),o([s.f],l.prototype,"setSelected",null),o([s.f],l.prototype,"updateQuery",null),o([s.f],l.prototype,"reset",null)}).call(this,n("5wds"))},SquP:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r}));var r=function(){function e(){}return e.fetchApprovalLink=function(e){return new Promise((function(n,r){return t.post(laroute.route("payments.paypal.create"),{order_id:e}).done(n).fail((function(t){return r({xhr:t})}))}))},e}()}).call(this,n("5wds"))},T0kv:function(t,e,n){"use strict";(function(t,e){var r,i=n("RHtj"),s=n("lo2x"),o=n("mwlt"),a=n("2LKk"),u=n("w9NC"),l=n("7nlf"),c=n("zaxE"),h=n("oPHq"),d=n("eN1P"),p=(n("Hs9Z"),n("lv9K")),f=n("srn7"),m=n("IJoN"),g=n("3Te0"),v=n("+CAb"),b=(n("I7Md"),n("CwFt")),y=n("qHJG"),w=n("SpnN"),k=n("1P+u"),j=(n("0VTr"),n("Lv69")),_=n("XPyy"),E=n("tX9j"),S=n("VWAl"),C=n("ed4P"),x=n("Eama"),P=n("f4vq"),T=n("/G9H"),O=n("elBb");P.a.reactTurbolinks.register("countdownTimer",(function(t){return Object(T.createElement)(c.a,{deadline:t.dataset.deadline})})),P.a.reactTurbolinks.register("blockButton",(function(t){return Object(T.createElement)(l.a,{userId:parseInt(t.dataset.target)})})),P.a.reactTurbolinks.register("beatmap-discussion-events",(function(e){var n,r;return n={events:Object(O.b)("json-events"),mode:"list"},r=Object(O.b)("json-users"),n.users=t.keyBy(r,"id"),n.users.null=n.users[void 0]=f.b.toJson(),Object(T.createElement)(i.a,n)})),P.a.reactTurbolinks.register("beatmapset-panel",(function(t){return Object(T.createElement)(s.b,Object(p.q)(JSON.parse(t.dataset.beatmapsetPanel)))})),P.a.reactTurbolinks.register("forum-post-report",(function(){return Object(T.createElement)(h.a)})),P.a.reactTurbolinks.register("spotlight-select-options",(function(){return Object(T.createElement)(j.a,Object(O.b)("json-spotlight-select-options"))})),P.a.reactTurbolinks.register("multiplayer-select-options",(function(){return Object(T.createElement)(g.a,Object(O.b)("json-multiplayer-select-options"))})),P.a.reactTurbolinks.register("comments",(function(t){var e;return(e=JSON.parse(t.dataset.props)).component=a.a,Object(T.createElement)(u.a,e)})),P.a.reactTurbolinks.register("chat-icon",(function(t){return Object(T.createElement)(o.a,{type:t.dataset.type})})),P.a.reactTurbolinks.register("main-notification-icon",(function(t){return Object(T.createElement)(m.a,{type:t.dataset.type})})),P.a.reactTurbolinks.register("notification-widget",(function(t){return Object(T.createElement)(v.a,function(){try{return JSON.parse(t.dataset.notificationWidget)}catch(e){}}())})),r=new w.a,P.a.reactTurbolinks.register("quick-search",(function(){return Object(T.createElement)(b.a,{worker:r})})),P.a.reactTurbolinks.register("quick-search-button",(function(){return Object(T.createElement)(y.a,{worker:r})})),P.a.reactTurbolinks.register("ranking-filter",(function(t){return Object(T.createElement)(k.a,{countries:Object(O.c)("json-countries"),gameMode:t.dataset.gameMode,type:t.dataset.type,variants:function(){try{return JSON.parse(t.dataset.variants)}catch(e){}}()})})),P.a.reactTurbolinks.register("user-card",(function(t){return Object(T.createElement)(_.a,{modifiers:function(){try{return JSON.parse(t.dataset.modifiers)}catch(e){}}(),user:function(){if(t.dataset.isCurrentUser)return currentUser;try{return JSON.parse(t.dataset.user)}catch(e){}}()})})),P.a.reactTurbolinks.register("user-card-store",(function(t){return Object(T.createElement)(E.a,{user:JSON.parse(t.dataset.user)})})),P.a.reactTurbolinks.register("user-card-tooltip",(function(t){return Object(T.createElement)(S.a,{container:t,lookup:t.dataset.lookup})})),e(document).ready(S.b),P.a.reactTurbolinks.register("user-cards",(function(t){return Object(T.createElement)(C.a,{modifiers:function(){try{return JSON.parse(t.dataset.modifiers)}catch(e){}}(),users:function(){try{return JSON.parse(t.dataset.users)}catch(e){}}()})})),P.a.reactTurbolinks.register("wiki-search",(function(){return Object(T.createElement)(x.a)})),P.a.reactTurbolinks.register("landing-news",(function(){return Object(T.createElement)(d.a,{posts:Object(O.b)("json-posts")})}))}).call(this,n("Hs9Z"),n("5wds"))},TgbU:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.AccountEdit=function(){function r(){this.update=n(this.update,this),this.abortUpdate=n(this.abortUpdate,this),this.saving=n(this.saving,this),this.saved=n(this.saved,this),this.clearState=n(this.clearState,this),this.ajaxSaved=n(this.ajaxSaved,this),this.ajaxSaving=n(this.ajaxSaving,this),this.ajaxError=n(this.ajaxError,this),this.initializeUpdate=n(this.initializeUpdate,this),t(document).on("input change",".js-account-edit",this.initializeUpdate),t(document).on("ajax:error",".js-account-edit",this.ajaxError),t(document).on("ajax:send",".js-account-edit",this.ajaxSaving),t(document).on("ajax:success",".js-account-edit",this.ajaxSaved),t(document).on("ajax:success",".js-user-preferences-update",this.ajaxUserPreferencesUpdate)}return r.prototype.initializeUpdate=function(t){var n;if("1"===(n=t.currentTarget).dataset.accountEditAutoSubmit)return this.abortUpdate(n),this.saving(n),null==n.debouncedUpdate&&(n.debouncedUpdate=e.debounce(this.update,1e3)),n.debouncedUpdate(n)},r.prototype.ajaxError=function(t){return this.clearState(t.currentTarget)},r.prototype.ajaxSaving=function(t){return this.saving(t.currentTarget)},r.prototype.ajaxSaved=function(t){return this.saved(t.currentTarget)},r.prototype.ajaxUserPreferencesUpdate=function(e,n){return t.publish("user:update",n)},r.prototype.clearState=function(t){return t.dataset.accountEditState=""},r.prototype.getValue=function(t){var e,n,r,i,s,o,a,u,l,c;if("array"===t.dataset.accountEditType)for(a=null,c=[""],n=0,s=(u=t.querySelectorAll("input")).length;n<s;n++)(e=u[n]).checked&&c.push(e.value);else if("radio"===t.dataset.accountEditType){for(a=t.dataset.lastValue,i=0,o=(l=t.querySelectorAll('input[type="radio"]')).length;i<o;i++)if((e=l[i]).checked){c=e.value;break}}else a=t.dataset.lastValue,c="checkbox"===(r=t.querySelector(".js-account-edit__input")).type?r.checked:r.value;return{value:c,prevValue:a}},r.prototype.getMultiValue=function(t){var e,n,r,i,s;for(n={},r=0,i=(s=t.querySelectorAll(".js-account-edit__input")).length;r<i;r++)n[(e=s[r]).name]=e.checked;return n},r.prototype.saved=function(t){return t.dataset.accountEditState="saved",t.savedTimeout=Timeout.set(3e3,(e=this,function(){return e.clearState(t)}));var e},r.prototype.saving=function(t){return t.dataset.accountEditState="saving"},r.prototype.abortUpdate=function(t){var e;return Timeout.clear(t.savedTimeout),null!=(e=t.updating)&&e.abort(),this.clearState(t)},r.prototype.update=function(e){var n,r,i,s,o,a,u,l,c,h,d;if("multi"===e.dataset.accountEditType)n=this.getMultiValue(e);else{if((h=(a=this.getValue(e)).value)===(o=a.prevValue))return this.clearState(e);i=e.querySelector(".js-account-edit__input"),r=null!=(u=e.dataset.field)?u:i.name,e.dataset.lastValue=h,(s={})[""+r]=h,n=s}return c=null!=(l=e.dataset.url)?l:laroute.route("account.update"),e.updating=t.ajax(c,{method:"PUT",data:n}).done((d=this,function(n){return d.saved(e),t(e).trigger("ajax:success",n)})).fail(function(n){return function(r,i){if("abort"!==i)return e.lastValue=o,n.clearState(e),t(e).trigger("ajax:error",[r,i])}}(this))},r}()}).call(this,n("5wds"),n("Hs9Z"))},U4GN:function(t,e,n){"use strict";(function(t,e){var r=n("+bOe"),i=n("/DQ7"),s=function(t,e){return function(){return t.apply(e,arguments)}};window.Nav2=function(){function n(e){this.clickMenu=e,this.showMenuBg=s(this.showMenuBg,this),this.loginBoxVisible=s(this.loginBoxVisible,this),this.autoMobileNav=s(this.autoMobileNav,this),this.autoCenterPopup=s(this.autoCenterPopup,this),this.menuBg=document.getElementsByClassName("js-nav2--menu-bg"),t.subscribe("click-menu:current",this.autoCenterPopup),t.subscribe("click-menu:current",this.autoMobileNav),t.subscribe("menu:current",this.showMenuBg)}return n.prototype.autoCenterPopup=function(e,n){var r,i,s,o,a,u,l,c,h,d,p;for(d=n.target,this.currentMenu=d,t(window).off("resize.nav2-center-popup"),o=0,a=(c=document.querySelectorAll(".js-nav2--centered-popup")).length;o<a;o++)null!=(r=(l=c[o]).closest(".js-click-menu"))&&(r.dataset.clickMenuId===this.currentMenu?(l.classList.remove("hidden"),i=l,u=document.querySelector(".js-click-menu[data-click-menu-target='"+this.currentMenu+"']")):l.classList.add("hidden"));if(null!=i)return p=this,s=function(){return p.centerPopup(i,u)},t(window).on("resize.nav2-center-popup",s),this.loginBoxVisible()&&_exported.pageChangeImmediate(),s(),null!=(h=i.querySelector(".js-nav2--autofocus"))?h.focus():void 0},n.prototype.autoMobileNav=function(e,n){var i,s,o,a;return i=n.previousTree,s=n.target,o=n.tree,"mobile-menu"===s&&(this.clickMenu.show("mobile-nav"),Timeout.set(0,(a=this,function(){return t(a.clickMenu.menu("mobile-menu")).finish().slideDown(150)}))),-1!==o.indexOf("mobile-menu")?Object(r.b)():-1!==i.indexOf("mobile-menu")?(Object(r.a)(),Timeout.set(0,function(e){return function(){return t(e.clickMenu.menu("mobile-menu")).finish().slideUp(150)}}(this))):void 0},n.prototype.centerPopup=function(t,e){var n,r,i,s,o,a,u,l,c,h,d,p;return l=t.getBoundingClientRect(),i=t.parentElement.getBoundingClientRect(),p=e.getBoundingClientRect(),n=document.body.getBoundingClientRect().width-5,d=p.width/2,s=l.width/2,r=(u=(o=i.left)+(a=p.left+d-o-s))<0?-1*p.left:(h=u+l.width,(c=Math.round(h-n))>0?a-c:a),r=Math.floor(r),t.style.transform="translateX("+r+"px)"},n.prototype.loginBoxVisible=function(){return"nav2-login-box"===this.currentMenu},n.prototype.showMenuBg=function(t,n){var r;return r=e.startsWith(n,"nav2-menu-popup-"),Object(i.c)(this.menuBg[0],r)},n}()}).call(this,n("5wds"),n("Hs9Z"))},UaOV:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.NavButton=function(){function n(){this.hideOrShow=e(this.hideOrShow,this),this.load=e(this.load,this),this.containers=document.getElementsByClassName("js-nav-button--container"),this.items=document.getElementsByClassName("js-nav-button--item"),this.main=document.getElementsByClassName("js-nav-button"),addEventListener("turbolinks:load",this.load)}return n.prototype.load=function(){var e,n,r,i;if(this.listening||(this.listening=!0,t(window).on("resize",this.hideOrShow)),0!==this.main.length){for(this.itemWidth=this.items[0].offsetWidth,this.defaultWidth=0,n=0,r=(i=this.containers).length;n<r;n++)e=i[n],this.defaultWidth+=e.offsetWidth;return this.hideOrShow()}},n.prototype.hideOrShow=function(){var t,e,n,r,i,s,o,a,u;if(0!==this.main.length){for(t=this.main[0].offsetWidth,e=this.defaultWidth,r=0,s=(a=this.items).length;r<s;r++)a[r].classList.remove("hidden");if(t<e)for(i=0,o=(u=this.items).length;i<o;i++)if(n=u[i],e-=this.itemWidth,n.classList.add("hidden"),t>=e)return}},n}()}).call(this,n("5wds"))},VAqo:function(t,e,n){(function(t){var e,n,r={}.hasOwnProperty;e=function(t){switch(t){case"false":return!1;case"true":return!0}},n=function(e){var n;return n=parseInt(e,10),t.isFinite(n)?n:null},window.BeatmapsetFilter=function(){function i(){}return i.castFromString={genre:n,language:n,mode:n,nsfw:e},i.charToKey={c:"general",e:"extra",g:"genre",l:"language",m:"mode",nsfw:"nsfw",played:"played",q:"query",r:"rank",s:"status",sort:"sort"},i.filtersFromUrl=function(t){var e,n,i,s,o,a;for(e in s=new URL(t).searchParams,n={},o=this.charToKey)r.call(o,e)&&(i=o[e],null!=(a=s.get(e))&&0!==a.length&&(this.castFromString[i]&&(a=this.castFromString[i](a)),n[i]=a));return n},i.keyToChar=function(){return null!=this._keyToChar?this._keyToChar:this._keyToChar=t.invert(this.charToKey)},i.defaults={general:"",extra:"",genre:null,language:null,mode:null,played:"any",query:"",rank:"",status:"leaderboard"},i.expand=["genre","language","extra","rank","played"],i.fillDefaults=function(t){var e,n,r,s,o,a;for(a={},e=0,r=(s=i.keys).length;e<r;e++)a[n=s[e]]=null!=(o=t[n])?o:i.getDefault(t,n);return a},i.getDefault=function(t,e){var n,r;if(i.defaults.hasOwnProperty(e))return i.defaults[e];switch(e){case"nsfw":return osuCore.userPreferences.get("beatmapset_show_nsfw");case"sort":return(null!=(n=t.query)?n.trim().length:void 0)>0?"relevance_desc":"pending"===(r=t.status)||"graveyard"===r||"mine"===r?"updated_desc":"ranked_desc"}},i.getDefaults=function(t){var e,n,r,s,o;for(o={},e=0,r=(s=i.keys).length;e<r;e++)o[n=s[e]]=i.getDefault(t,n);return o},i.keys=["general","extra","genre","language","mode","nsfw","played","query","rank","sort","status"],i.queryParamsFromFilters=function(t){var e,n,i;for(n in e={},t)r.call(t,n)&&null!=(i=t[n])&&this.getDefault(t,n)!==i&&(e[this.keyToChar()[n]]=i);return e},i.supporterRequired=function(e){return t.reject(["played","rank"],(n=this,function(r){return t.isEmpty(e[r])||e[r]===n.getDefault(e,r)}));var n},i}()}).call(this,n("Hs9Z"))},VWAl:function(t,e,n){"use strict";(function(t){n.d(e,"b",(function(){return _})),n.d(e,"a",(function(){return E}));var r=n("0h6b"),i=n("Hs9Z"),s=n("f4vq"),o=n("/G9H"),a=n("WKXC"),u=n("ZG74"),l=n("LhsB"),c=n("XPyy");const h="qtip--user-card";let d,p=!1;function f(e){const n=e.dataset.userId;e._tooltip=n;const r=t("#js-usercard__loading-template").children().clone()[0];r.classList.remove("js-react--user-card"),r.classList.add("js-react--user-card-tooltip"),r.dataset.lookup=n,null!=e.dataset.tooltipPosition&&(r.dataset.tooltipPosition=e.dataset.tooltipPosition),t(e).qtip(function(e){var n;const r=null!==(n=e.dataset.tooltipPosition)&&void 0!==n?n:"right center";return{content:{text:e},events:{render:s.a.reactTurbolinks.boot,show:j},hide:{delay:220,effect:k,fixed:!0},position:{adjust:{scroll:!1},at:r,my:m(r),viewport:t(window)},show:{delay:200,effect:w,ready:!0},style:{classes:h,def:!1,tip:!1}}}(r))}function m(t){switch(t){case"top center":return"bottom center";case"left center":return"right center";case"bottom center":return"top center"}return"left center"}function g(){p=!1,d=null}function v(){p=!0}function b(){p=!1}function y(e){var n,r;if(null!=d)return;if(s.a.windowSize.isMobile)return;const o=e.currentTarget,u=osu.presence(o.dataset.userId);if(null!=u&&!i.find(null!==(r=null===(n=s.a.currentUser)||void 0===n?void 0:n.blocks)&&void 0!==r?r:[],{target_id:parseInt(u,10)})){if(null==o._tooltip)return f(o);if(o._tooltip!==o.dataset.userId){const e=t(o).qtip("api");null!=e&&(null!=e.tooltip&&Object(a.unmountComponentAtNode)(e.tooltip.find(".js-react--user-card-tooltip")[0]),e.destroy(),delete o._tooltip)}}}function w(){t(this).fadeTo(110,1)}function k(){t(this).fadeTo(110,0)}function j(e,n){if(null!=d||s.a.windowSize.isMobile)return e.preventDefault();const r=n.target[0];r._tooltip!==r.dataset.userId&&(e.preventDefault(),t(r).trigger("mouseover"))}function _(){t(document).on("mouseover",".js-usercard",y),t(document).on("mouseenter",".js-react--user-card-tooltip",v),t(document).on("mouseleave",".js-react--user-card-tooltip",b),t(document).on("turbolinks:before-cache",g)}class E extends o.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"contextActiveKeyDidChange",{enumerable:!0,configurable:!0,writable:!0,value:u.c.bind(this)}),Object.defineProperty(this,"activeKeyDidChange",{enumerable:!0,configurable:!0,writable:!0,value:e=>{d=e,this.contextActiveKeyDidChange(e),null!=e||p||t(`.${h}`).qtip("hide")}})}componentDidMount(){this.getUser().then(t=>{this.setState({user:t})})}getUser(){const e=Object(r.route)("users.card",{user:this.props.lookup});return t.ajax({dataType:"json",type:"GET",url:e})}render(){const t=this.state.activeKey===this.props.lookup;return o.createElement(l.a.Provider,{value:this.props.container},o.createElement(u.a.Provider,{value:{activeKeyDidChange:this.activeKeyDidChange}},o.createElement(u.b.Provider,{value:this.props.lookup},o.createElement(c.a,{activated:t,user:this.state.user}))))}}}).call(this,n("5wds"))},WHzX:function(t,e){window.Timeout=function(){function t(){}return t.clear=function(t){return clearTimeout(t)},t.set=function(t,e){return setTimeout(e,t)},t}()},WK7C:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.LandingUserStats=function(){function r(){var e;this.resize=n(this.resize,this),this.loadData=n(this.loadData,this),this.margin={top:40,right:0,bottom:0,left:0},this.peakR=5,this.svgContainerOuter=t.select(".js-landing-graph"),this.svgContainerOuter.selectAll("svg").remove(),this.svgContainerInner=this.svgContainerOuter.append("svg").attr("class","landing-graph"),this.svg=this.svgContainerInner.append("g").attr("transform","translate("+this.margin.left+", "+(this.margin.top+1)+")"),this.svgArea=this.svg.append("path").attr("class","landing-graph__area"),this.svgPeakText=this.svg.append("text").attr("class","landing-graph__text").attr("y",2*-this.peakR),this.svgPeakCircle=this.svg.append("circle").attr("class","landing-graph__circle").attr("cy",0).attr("r",this.peakR),this.scaleX=t.scaleLinear(),this.scaleY=t.scaleTime(),this.area=t.area().curve(t.curveBasis).x((e=this,function(t){return e.scaleX(t.x)})).y0(function(t){return function(){return t.height}}(this)).y1(function(t){return function(e){return t.scaleY(e.y)}}(this)),this.loadData(),this.resize()}return r.prototype.loadData=function(){if(this.data=_exported.parseJson("json-stats"),!e.isEmpty(this.data))return this.maxElem=e.maxBy(this.data,(function(t){return t.y})),this.scaleX.domain(t.extent(this.data,(function(t){return t.x}))),this.scaleY.domain([0,t.max(this.data,(function(t){return t.y}))]),this.svgPeakText.text(osu.trans("home.landing.peak",{count:osu.formatNumber(this.maxElem.y)})),this.peakTextLength=this.svgPeakText.node().getComputedTextLength()},r.prototype.resize=function(){var t;if(!e.isEmpty(this.data))return this.width=parseInt(this.svgContainerOuter.style("width"))-this.margin.left-this.margin.right,this.height=parseInt(this.svgContainerOuter.style("height"))-this.margin.top-this.margin.bottom,this.scaleX.range([0,this.width]),this.scaleY.range([this.height,0]),this.svgContainerInner.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svgArea.datum(this.data).attr("d",this.area),this.svgPeakCircle.attr("cx",this.scaleX(this.maxElem.x)),this.svgPeakText.attr("x",(t=this,function(){var e;return e=t.scaleX(t.maxElem.x)+2*t.peakR,t.peakTextLength+e>t.width?t.scaleX(t.maxElem.x)-(t.peakTextLength+2*t.peakR):e}))},r}()}).call(this,n("kUxX"),n("Hs9Z"))},Y4VH:function(t,e){window.Hits=function(){function t(){}return t.generate=function(t){var e,n;return n=t.score,{header:(e="mania"===t.playmode?["count_geki","count_300","count_katu","count_100","count_50"]:["count_300","count_100","count_50"]).map((function(t){return osu.trans("common.score_count."+t)})).join("/"),values:e.map((function(t){return osu.formatNumber(n.statistics[t])})).join("/")}},t}()},YEnZ:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.BeatmapPack=function(){function n(n){var r;this.slideDown=e(this.slideDown,this),this.close=e(this.close,this),this.open=e(this.open,this),this.onClick=e(this.onClick,this),this.el=n,this.packId=n.dataset.packId,this.packBody=this.el.querySelector(".js-accordion__item-body"),this.expander=this.el.querySelector(".js-accordion__item-header"),this.busy=!1,this.isCurrent=this.el.classList.contains("js-accordion__item--expanded"),t(".js-accordion").on("beatmappack:clicked",this.onClick),t(this.expander).on("click",(r=this,function(e){return e.preventDefault(),t(r.el).trigger("beatmappack:clicked",r.packId)}))}return n.initialize=function(){var t,e,r,i,s;for(s=[],e=0,r=(i=document.querySelectorAll(".js-beatmap-pack")).length;e<r;e++)t=i[e],s.push(new n(t));return s},n.prototype.onClick=function(t,e){return t.stopPropagation(),this.isCurrent||this.packId!==e?this.close():this.open()},n.prototype.open=function(){var e,n;if(this.isCurrent=!0,!this.busy)return this.nextFrame((n=this,function(){return t(n.el).addClass("js-accordion__item--expanded")})),null!=(e=this.packBody.innerHTML)&&e.length?this.isCurrent?this.slideDown():void 0:(this.busy=!0,this.getBeatmapPackItem(this.packId).done(function(t){return function(e){return t.nextFrame((function(){if(t.packBody.innerHTML=e,t.isCurrent)return t.slideDown()}))}}(this)).fail(osu.ajaxError).always(function(t){return function(){return t.busy=!1}}(this)))},n.prototype.close=function(){var e;if(this.isCurrent)return this.isCurrent=!1,this.nextFrame((e=this,function(){return e.packBody.style.height="0",t(e.el).removeClass("js-accordion__item--expanded")}))},n.prototype.getBeatmapPackItem=function(e){return t.get(laroute.route("packs.raw",{pack:e}))},n.prototype.slideDown=function(){var t,e;return this.packBody.style.height="",t=this.packBody.getBoundingClientRect(),this.packBody.style.height="0",this.nextFrame((e=this,function(){return e.packBody.style.height=t.height+"px"}))},n.prototype.nextFrame=function(t){return window.requestAnimationFrame(t)},n}()}).call(this,n("5wds"))},auMk:function(t,e){window.Polyfills=function(){function t(){this.customEvent(),this.localStorage(),this.mathTrunc(),this.composedPath()}return t.prototype.composedPath=function(){if("function"!=typeof Event.prototype.composedPath)return Event.prototype.composedPath=function(){var t,e;for(e=this.target,t=[];null!=e.parentNode;)t.push(e),e=e.parentNode;return t.push(document,window),t}},t.prototype.customEvent=function(){var t;if("function"!=typeof CustomEvent)return(t=function(t,e){var n;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,window.CustomEvent=t},t.prototype.localStorage=function(){var t;try{return window.localStorage.setItem("_test","1"),window.localStorage.removeItem("_test")}catch(e){return t=new DumbStorage,window.localStorage=t,window.localStorage.__proto__=t}},t.prototype.mathTrunc=function(){return null!=Math.trunc?Math.trunc:Math.trunc=function(t){return t-t%1}},t}()},bTZw:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.BbcodePreview=function(){function n(){this.hidePreview=e(this.hidePreview,this),this.showPreview=e(this.showPreview,this),this.fetchPreview=e(this.fetchPreview,this),t(document).on("click",".js-bbcode-preview--show",this.fetchPreview),t(document).on("click",".js-bbcode-preview--hide",this.hidePreview)}return n.prototype.fetchPreview=function(e){var n,r,i,s,o;if(s=e.target,r=t(s).parents(".js-bbcode-preview--form"),i=r.find(".js-bbcode-preview--preview"),n=r.find(".js-bbcode-preview--body"),o=n.val(),n.attr("data-last-text"),"preview"!==r.attr("data-state")&&osu.present(o)){var a;if(o!==n.attr("data-last-text"))return r.attr("data-state","loading-preview"),t.ajax({url:laroute.route("bbcode-preview"),method:"POST",data:{text:o}}).done((a=this,function(t){return n.attr("data-last-text",o),i.html(t),_exported.pageChange(),a.showPreview(e)})).fail(osu.emitAjaxError(s));this.showPreview(e)}},n.prototype.showPreview=function(e){return t(e.target).parents(".js-bbcode-preview--form").attr("data-state","preview"),_exported.pageChange()},n.prototype.hidePreview=function(e){var n;return(n=t(e.target).parents(".js-bbcode-preview--form")).attr("data-state","write"),_exported.pageChange(),n.find(".js-bbcode-preview--body").focus()},n}()}).call(this,n("5wds"))},byFe:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumAutoClick=function(){function r(){this.previousClick=n(this.previousClick,this),this.onScroll=n(this.onScroll,this),this.onLoad=n(this.onLoad,this),this.nextClick=n(this.nextClick,this),this._triggerDistance=1200,this.throttledOnScroll=t.throttle(this.onScroll,1e3),e(document).on("turbolinks:load",this.onLoad)}return r.prototype.commonClick=function(t){if("1"!==t.dataset.noMore&&"1"!==t.dataset.failed&&0!==t.getBoundingClientRect().height)return t.click()},r.prototype.nextClick=function(){if(null!=this.nextLink&&!(this.nextLink.getBoundingClientRect().top>document.documentElement.clientHeight+this._triggerDistance))return this.commonClick(this.nextLink)},r.prototype.onLoad=function(){if(e.unsubscribe("scroll",this.throttledOnScroll),e(window).off("osu:page:change",this.throttledOnScroll),this.nextLink=document.querySelector(".js-forum__posts-show-more--next"),this.previousLink=document.querySelector(".js-forum__posts-show-more--previous"),null!=this.nextLink&&null!=this.previousLink)return this.throttledOnScroll(),e(window).on("scroll",this.throttledOnScroll),e.subscribe("osu:page:change",this.throttledOnScroll)},r.prototype.onScroll=function(){return this.previousClick(),this.nextClick()},r.prototype.previousClick=function(){if(null!=this.previousLink&&!(this.previousLink.getBoundingClientRect().top<-this._triggerDistance))return this.commonClick(this.previousLink)},r}()}).call(this,n("Hs9Z"),n("5wds"))},eN1P:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var r=n("0h6b"),i=n("Hs9Z"),s=n("XFVs"),o=n("/G9H"),a=n("Ncbg");function u({posts:t}){return o.createElement("div",{className:"landing-news"},t.length>0&&o.createElement(o.Fragment,null,o.createElement("div",{className:"landing-news__posts"},o.createElement(s.a,{modifiers:["landing","hover"],post:t[0]})),o.createElement("div",{className:"landing-news__posts"},i.slice(t,1).map((t,e)=>o.createElement(s.a,{key:e,modifiers:["landing","hover"],post:t}))),o.createElement("div",{className:"landing-news__link"},o.createElement(a.a,{hasMore:!0,label:osu.trans("home.landing.see_more_news"),loading:!1,modifiers:["no-icon"],url:Object(r.route)("news.index")}))))}},exjS:function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.DumbStorage=function(){function t(){this.setItem=n(this.setItem,this),this.removeItem=n(this.removeItem,this),this.getItem=n(this.getItem,this),this.clear=n(this.clear,this),this._data={}}return t.prototype.clear=function(){return this._data={}},t.prototype.getItem=function(t){return this._data.hasOwnProperty(t)?this._data[t]:null},t.prototype.removeItem=function(t){return delete this._data[t]},t.prototype.setItem=function(t,e){return this._data[t]=String(e)},t}()},gfK4:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.SyncHeight=function(){function r(){this.sync=n(this.sync,this),this.onResize=n(this.onResize,this),this.observe=n(this.observe,this),this.targets=document.getElementsByClassName("js-sync-height--target"),this.references=document.getElementsByClassName("js-sync-height--reference"),this.throttledSync=t.throttle(this.sync,100),e(document).on("turbolinks:load",this.sync),e.subscribe("osu:page:change",this.throttledSync),e.subscribe("sync-height:force",this.sync),e(window).on("resize",this.sync),this.observe()}return r.prototype.observe=function(){var t;return t={attributes:!0,subtree:!0},this.observer=new MutationObserver(this.onResize),this.observer.observe(document,t)},r.prototype.onResize=function(t){var e,n;for(e=0,n=t.length;e<n;e++)if("TEXTAREA"===t[e].target.tagName)return this.sync()},r.prototype.sync=function(){var t,e,n,r,i,s,o,a,u,l,c;for(e={},n=0,i=(o=this.references).length;n<i;n++)e[(u=o[n]).getAttribute("data-sync-height-target")]=u.offsetHeight;for(l=[],r=0,s=(a=this.targets).length;r<s;r++)null!=(t=e[(c=a[r]).getAttribute("data-sync-height-id")])?l.push(c.style.minHeight=t+"px"):l.push(void 0);return l},r}()}).call(this,n("Hs9Z"),n("5wds"))},hTA1:function(t,e,n){"use strict";(function(t,e,r,i){var s=n("Ma8u");null==window.polyfills&&(window.polyfills=new Polyfills),t.start(),t.setProgressBarDelay(0),e.relativeTimeThreshold("ss",44),e.relativeTimeThreshold("s",120),e.relativeTimeThreshold("m",120),e.relativeTimeThreshold("h",48),e.relativeTimeThreshold("d",62),e.relativeTimeThreshold("M",24),r.timeago.inWords=function(t){return e.duration(-1*t).humanize(!0)},i(document).on("turbolinks:request-start",s.b),i(document).on("turbolinks:request-end",s.a),i(document).on("submit","form",(function(t){if("0"!==t.currentTarget.dataset.loadingOverlay)return Object(s.b)()})),i(document).on("turbolinks:load",(function(){return BeatmapPack.initialize(),StoreSupporterTag.initialize(),StoreCheckout.initialize()})),null==window.currentUserObserver&&(window.currentUserObserver=new CurrentUserObserver),null==window.syncHeight&&(window.syncHeight=new SyncHeight),null==window.accountEdit&&(window.accountEdit=new AccountEdit),null==window.accountEditAvatar&&(window.accountEditAvatar=new AccountEditAvatar),null==window.accountEditBlocklist&&(window.accountEditBlocklist=new AccountEditBlocklist),null==window.bbcodePreview&&(window.bbcodePreview=new BbcodePreview),null==window.changelogChartLoader&&(window.changelogChartLoader=new ChangelogChartLoader),null==window.checkboxValidation&&(window.checkboxValidation=new CheckboxValidation),null==window.fancyGraph&&(window.fancyGraph=new FancyGraph),null==window.formClear&&(window.formClear=new FormClear),null==window.formError&&(window.formError=new FormError),null==window.formPlaceholderHide&&(window.formPlaceholderHide=new FormPlaceholderHide),null==window.formToggle&&(window.formToggle=new FormToggle),null==window.forum&&(window.forum=new Forum),null==window.forumAutoClick&&(window.forumAutoClick=new ForumAutoClick),null==window.forumCover&&(window.forumCover=new ForumCover),null==window.forumTopicTitle&&(window.forumTopicTitle=new ForumTopicTitle),null==window.forumTopicWatchAjax&&(window.forumTopicWatchAjax=new ForumTopicWatchAjax),null==window.globalDrag&&(window.globalDrag=new GlobalDrag),null==window.landingGraph&&(window.landingGraph=new LandingGraph),null==window.menu&&(window.menu=new Menu),null==window.navButton&&(window.navButton=new NavButton),null==window.postPreview&&(window.postPreview=new PostPreview),null==window.search&&(window.search=new Search),null==window.stickyFooter&&(window.stickyFooter=new StickyFooter),null==window.tooltipBeatmap&&(window.tooltipBeatmap=new TooltipBeatmap),null==window.tooltipDefault&&(window.tooltipDefault=new TooltipDefault),null==window.formConfirmation&&(window.formConfirmation=new FormConfirmation(window.formError)),null==window.forumPostsSeek&&(window.forumPostsSeek=new ForumPostsSeek(window.forum)),null==window.forumTopicPostJump&&(window.forumTopicPostJump=new ForumTopicPostJump(window.forum)),null==window.forumTopicReply&&(window.forumTopicReply=new ForumTopicReply({bbcodePreview:window.bbcodePreview,forum:window.forum,stickyFooter:window.stickyFooter})),null==window.nav2&&(window.nav2=new Nav2(osuCore.clickMenu)),null==window.twitchPlayer&&(window.twitchPlayer=new TwitchPlayer(osuCore.turbolinksReload)),i(document).on("change",".js-url-selector",(function(t){return osu.navigate(t.target.value,"1"===t.target.dataset.keepScroll)})),i(document).on("keydown",(function(t){if(27===t.keyCode)return i.publish("key:esc")}))}).call(this,n("dMdw"),n("7EfK"),n("5wds"),n("5wds"))},hbiH:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r=n("/G9H"),i=n("WKXC"),s=n("cX0L"),o=n("mnuU"),a=n("lS0N");class u{constructor(e,n){Object.defineProperty(this,"eventId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"root",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"destroy",{enumerable:!0,configurable:!0,writable:!0,value:()=>{Object(i.unmountComponentAtNode)(this.root),t(document).off(`.${this.eventId}`)}}),this.root=e.querySelector(".js-pswp-buttons"),Object(i.render)(r.createElement(r.Fragment,null,r.createElement(o.a,{pswp:n}),r.createElement(a.a,null)),this.root),this.eventId=`gallery-contest-${Object(s.a)()}`,t(document).on(`turbolinks:before-cache.${this.eventId}`,this.destroy),n.listen("destroy",this.destroy)}}}).call(this,n("5wds"))},icRW:function(t,e,n){"use strict";(function(t){var e=n("/DQ7"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.Menu=function(){function n(){this.setMenu=r(this.setMenu,this),this.refresh=r(this.refresh,this),this.hideMenu=r(this.hideMenu,this),this.onMouseLeave=r(this.onMouseLeave,this),this.onMouseEnter=r(this.onMouseEnter,this),this.onTouchStart=r(this.onTouchStart,this),this.onGlobalTouchstart=r(this.onGlobalTouchstart,this),this.onDocumentReady=r(this.onDocumentReady,this),this.currentTree=r(this.currentTree,this),this.defaultMenu=r(this.defaultMenu,this),this.menuTimeout=150,t(document).on("touchstart",".js-menu",this.onTouchStart),t(document).on("mouseenter",".js-menu",this.onMouseEnter),t(document).on("mouseleave",".js-menu",this.onMouseLeave),t(document).on("touchstart",this.onGlobalTouchstart),t(document).on("turbolinks:load",this.onDocumentReady)}return n.prototype.$menuLink=function(e){return t(".js-menu[data-menu-target"+(e?"='"+e+"'":"")+"]")},n.prototype.closestMenuId=function(t){return t.closest("[data-menu-id]").attr("data-menu-id")},n.prototype.defaultMenu=function(){var t,e;return null!=(t=document.querySelector('.js-menu[data-menu-default="1"]'))&&null!=(e=t.dataset)?e.menuTarget:void 0},n.prototype.parentsMenuId=function(t){return t.parents("[data-menu-id]").attr("data-menu-id")},n.prototype.currentTree=function(){var t,e;if(!this.currentMenu)return[];for(t=[e=this.currentMenu];e=this.closestMenuId(this.$menuLink(e));)t.push(e);return t},n.prototype.onDocumentReady=function(){return this.refresh(),this.setMenu(null,(e=this,function(){return e.closestMenuId(t(":hover").last())}));var e},n.prototype.onGlobalTouchstart=function(t){if(this.currentMenu&&null==t.target.closest(".js-menu"))return this.hideMenu()},n.prototype.onTouchStart=function(e){var n,r,i,s,o,a;if(r=e.currentTarget,null!=(s=r.dataset.menuTarget))return n=t(s),e.preventDefault(),o=parseInt(null!=(i=r.dataset.menuShowDelay)?i:this.menuTimeout,10),this.setMenu(o,(a=this,function(){return a.currentMenu===s?a.closestMenuId(n):s}))},n.prototype.onMouseEnter=function(e){var n,r,i,s;return n=e.currentTarget,i=parseInt(null!=(r=n.dataset.menuShowDelay)?r:this.menuTimeout,10),this.setMenu(i,(s=this,function(){var e;return null!=(e=n.dataset.menuTarget)?e:s.closestMenuId(t(n))}))},n.prototype.onMouseLeave=function(e){var n,r;return n=t(e.currentTarget),this.setMenu(null,(r=this,function(){return r.parentsMenuId(n)}))},n.prototype.hideMenu=function(){return this.setMenu()},n.prototype.refresh=function(){var n,r,i,s,o,a,u;for(null==this.currentMenu&&(this.currentMenu=this.defaultMenu()),a=document.querySelectorAll(".js-menu[data-menu-id]"),n=this.currentTree(),t.publish("menu:current",this.currentMenu),u=[],r=0,i=a.length;r<i;r++)o=(s=a[r]).getAttribute("data-menu-id"),-1===n.indexOf(o)?(Object(e.b)(s),u.push(this.$menuLink(o).removeClass("js-menu--active"))):(Object(e.a)(s),this.$menuLink(o).addClass("js-menu--active"),u.push(t(s).trigger("menu:showing")));return u},n.prototype.setMenu=function(t,e){return null==t&&(t=this.menuTimeout),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(t,(n=this,function(){return n.currentMenu="function"==typeof e?e():void 0,n.refresh()}));var n},n}()}).call(this,n("5wds"))},jepR:function(t,e,n){"use strict";(function(t){var e=n("/jJF"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumCover=function(){function n(){var e;this.refresh=r(this.refresh,this),this.remove=r(this.remove,this),this.updateOptions=r(this.updateOptions,this),this.update=r(this.update,this),this.setOverlay=r(this.setOverlay,this),this.initFileupload=r(this.initFileupload,this),this.isModalOpen=r(this.isModalOpen,this),this.hasCoverEditor=r(this.hasCoverEditor,this),this.hasCover=r(this.hasCover,this),this.checkModal=r(this.checkModal,this),this.$uploadButton=r(this.$uploadButton,this),this.header=document.getElementsByClassName("js-forum-cover--header"),this.uploadButton=document.getElementsByClassName("js-forum-cover--upload-button"),this.removeButton=document.getElementsByClassName("js-forum-cover--remove-button"),this.overlay=document.getElementsByClassName("js-forum-cover--overlay"),this.loading=document.getElementsByClassName("js-forum-cover--loading"),this.modal=document.getElementsByClassName("js-forum-cover--modal"),t.subscribe("click-menu:current",this.checkModal),t(document).on("click",".js-forum-cover--remove-button",this.remove),t.subscribe("dragenterGlobal",(e=this,function(){return e.setOverlay("active")})),t.subscribe("dragendGlobal",function(t){return function(){return t.setOverlay("hidden")}}(this)),t(document).on("dragenter",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("hover")}}(this)),t(document).on("dragleave",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("active")}}(this)),t(document).on("turbolinks:load",this.refresh)}return n.prototype.$uploadButton=function(){return t(this.uploadButton[0])},n.prototype.checkModal=function(t,e){if("forum-cover-edit"===e.target)return this.initFileupload()},n.prototype.hasCover=function(){return"post"!==this.uploadButton[0].dataset.customMethod},n.prototype.hasCoverEditor=function(){return this.uploadButton.length>0},n.prototype.isModalOpen=function(t){var e;return!!this.hasCoverEditor()&&"hidden"!==(null!=(e=this.modal[0])?e.dataset.visibility:void 0)},n.prototype.initFileupload=function(){var n,r;if(this.isModalOpen()&&!this.uploadButton[0]._initialized)return this.uploadButton[0]._initialized=!0,n=t(".js-forum-cover--modal"),this.$uploadButton().fileupload({method:"POST",paramName:"cover_file",dataType:"json",dropZone:n,submit:(r=this,function(){return r.uploadButton[0].dataset.state="loading"}),done:function(t){return function(e,n){return t.update(n.result)}}(this),fail:e.b,complete:function(t){return function(e,n){return t.uploadButton[0].dataset.state=""}}(this)}),this.updateOptions()},n.prototype.setOverlay=function(t){if(this.hasCoverEditor()&&t!==this.overlay[0].getAttribute("data-state"))return this.overlay[0].setAttribute("data-state",t)},n.prototype.update=function(e){return t(".js-forum-cover--input").val(e.id),this.uploadButton[0].dataset.url=e.url,this.uploadButton[0].dataset.customMethod=e.method,this.uploadButton[0].dataset.fileUrl=e.fileUrl||"",this.updateOptions(),this.refresh()},n.prototype.updateOptions=function(){if(this.uploadButton[0]._initialized)return this.$uploadButton().fileupload("option",{url:this.uploadButton[0].dataset.url,formData:{_method:this.uploadButton[0].dataset.customMethod}})},n.prototype.remove=function(e){var n;if((e.preventDefault(),this.hasCover())&&confirm(e.currentTarget.dataset.destroyConfirm))return this.removeButton[0].dataset.state="loading",t.ajax({url:this.uploadButton[0].dataset.url,method:"delete"}).done((n=this,function(t){return n.update(t)})).always(function(t){return function(){return t.removeButton[0].dataset.state=""}}(this))},n.prototype.refresh=function(){var e,n;if(this.hasCoverEditor())return e=this.uploadButton[0].dataset.fileUrl||this.uploadButton[0].dataset.defaultFileUrl,t(this.header).css({backgroundImage:null!=(n=osu.urlPresence(e))?n:""}),this.removeButton[0].disabled=!this.hasCover(),this.initFileupload()},n}()}).call(this,n("5wds"))},lS0N:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n("ZJc0"),i=n("/G9H");class s extends i.PureComponent{constructor(t){super(t),Object.defineProperty(this,"getVoteState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{var t;return JSON.parse(null!==(t=this.voteSummary().dataset.contestVoteSummary)&&void 0!==t?t:"")}}),Object.defineProperty(this,"syncState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState(this.getVoteState())}}),Object.defineProperty(this,"voteSummary",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const t=document.querySelector(".js-contest-vote-summary");if(t instanceof HTMLElement)return t;throw new Error(".js-contest-vote-summary is not HTMLElement")}}),this.state=this.getVoteState()}componentDidMount(){t.subscribe("contest:vote:end",this.syncState)}componentWillUnmount(){t.unsubscribe("contest:vote:end",this.syncState)}render(){return i.createElement("div",{className:"pswp__button pswp__button--vote-progress"},i.createElement(r.a,{current:this.state.voteCount,max:this.state.maxVotes,theme:"gallery-contest",tooltip:osu.trans("contest.voting.progress._",{max:this.state.maxVotes,used:this.state.voteCount})}))}}}).call(this,n("5wds"))},mnuU:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n("/G9H"),i=n("cX0L");class s extends r.PureComponent{constructor(t){super(t),Object.defineProperty(this,"eventId",{enumerable:!0,configurable:!0,writable:!0,value:`gallery-contest-${Object(i.a)()}`}),Object.defineProperty(this,"mainRef",{enumerable:!0,configurable:!0,writable:!0,value:r.createRef()}),Object.defineProperty(this,"buttonState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const t=this.button();return null!=t&&null!=t.dataset.contestVoteMeta?JSON.parse(t.dataset.contestVoteMeta):{}}}),Object.defineProperty(this,"buttonTitle",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(!this.state.isLoading&&!this.state.button.votingOver)return this.state.button.isSelected?osu.trans("contest.voting.button.remove"):this.state.button.hasVote?osu.trans("contest.voting.button.add"):osu.trans("contest.voting.button.used_up")}}),Object.defineProperty(this,"isDisabled",{enumerable:!0,configurable:!0,writable:!0,value:()=>this.state.isLoading||this.state.button.votingOver||!this.state.button.isSelected&&!this.state.button.hasVote}),Object.defineProperty(this,"loadingEnd",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({isLoading:!1}),this.syncState()}}),Object.defineProperty(this,"loadingStart",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({isLoading:!0})}}),Object.defineProperty(this,"mainClass",{enumerable:!0,configurable:!0,writable:!0,value:()=>{let t="pswp__button pswp__button--contest-vote js-gallery-extra";return this.state.button.isSelected&&(t+=" pswp__button--contest-vote-active"),this.isDisabled()&&(t+=" pswp__button--disabled"),t}}),Object.defineProperty(this,"resetTooltip",{enumerable:!0,configurable:!0,writable:!0,value:()=>{const t=this.mainRef.current;null!=t&&tooltipDefault.remove(t)}}),Object.defineProperty(this,"syncState",{enumerable:!0,configurable:!0,writable:!0,value:()=>{this.setState({button:this.buttonState()})}}),Object.defineProperty(this,"vote",{enumerable:!0,configurable:!0,writable:!0,value:()=>{if(this.isDisabled())return;const t=this.button();null!=t&&t.click()}}),this.state={button:this.buttonState(),isLoading:!1}}componentDidMount(){t.subscribe(`contest:vote:click.${this.eventId}`,this.loadingStart),t.subscribe(`contest:vote:end.${this.eventId}`,this.loadingEnd),this.props.pswp.listen("afterChange",this.syncState)}componentDidUpdate(){this.resetTooltip()}componentWillUnmount(){t.unsubscribe(`.${this.eventId}`)}render(){return r.createElement("button",{ref:this.mainRef,className:this.mainClass(),onClick:this.vote,title:this.buttonTitle()},r.createElement("span",{className:this.iconClass()}))}button(){if(null==this.props.pswp.currItem)return;const t=this.props.pswp.currItem.element.dataset.buttonId;return document.querySelector(`.js-contest-vote-button[data-button-id='${t}']`)}iconClass(){return this.state.isLoading?"fas fa-sync fa-spin":"fas fa-star"}}}).call(this,n("5wds"))},mwlt:function(t,e,n){"use strict";var r=n("lv9K"),i=n("KUml"),s=n("NnvF"),o=n("f4vq"),a=n("/G9H"),u=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o};let l=class extends a.Component{get unreadCount(){return o.a.dataStore.notificationStore.unreadStacks.getOrCreateType({objectType:"channel"}).total}constructor(t){super(t),Object(r.p)(this)}render(){return a.createElement(s.a,{count:this.unreadCount,iconClassName:"fas fa-comment-alt",ready:o.a.notificationsWorker.hasData,type:this.props.type})}};u([r.h],l.prototype,"unreadCount",null),l=u([i.b],l),e.a=l},o5lo:function(t,e,n){"use strict";(function(t){var e=n("Ma8u"),r=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumTopicWatchAjax=function(){function n(){this.shouldContinue=r(this.shouldContinue,this),this.loading=r(this.loading,this),this.fail=r(this.fail,this),this.done=r(this.done,this),this.abortAll=r(this.abortAll,this),t(document).on("ajax:before",".js-forum-topic-watch-ajax",this.shouldContinue),t(document).on("ajax:send",".js-forum-topic-watch-ajax",this.loading),t(document).on("ajax:error",".js-forum-topic-watch-ajax",this.fail),t(document).on("ajax:success",".js-forum-topic-watch-ajax",this.done),this.xhr=[],this.unknownState=!1}return n.prototype.abortAll=function(){var t,e;for(t=[];null!=(e=this.xhr.pop());)t.push(e.abort());return t},n.prototype.done=function(){return this.unknownState=!1},n.prototype.fail=function(t,e,n){var r;r=t.currentTarget,"abort"===n&&(r.dataset.skipAjaxErrorPopup="1"),r.classList.remove("js-forum-topic-watch-ajax--loading"),r.disabled=!1},n.prototype.loading=function(t,n){var r;this.unknownState=!0,this.abortAll(),this.xhr.push(n),Object(e.a)(),(r=t.currentTarget).dataset.skipAjaxErrorPopup="0",r.classList.add("js-forum-topic-watch-ajax--loading"),r.disabled=!0},n.prototype.shouldContinue=function(t){return this.unknownState||"1"!==t.currentTarget.dataset.forumTopicWatchAjaxIsActive},n}()}).call(this,n("5wds"))},oPHq:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n("/G9H"),i=n("hc33");class s extends r.Component{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{postId:"",username:""}}),Object.defineProperty(this,"reportRef",{enumerable:!0,configurable:!0,writable:!0,value:r.createRef()}),Object.defineProperty(this,"onClickReportButton",{enumerable:!0,configurable:!0,writable:!0,value:t=>{if(0!==t.button)return;const e=t.currentTarget.closest(".js-forum-post");if(null==e)return;const n=e.dataset.postId,r=e.dataset.postUsername;null!=n&&null!=r&&this.setState({postId:n,username:r},()=>{null!=this.reportRef.current&&this.reportRef.current.showForm()})}})}componentDidMount(){t(document).on("click",".js-forum-post-report",this.onClickReportButton)}componentWillUnmount(){t(document).off("click",".js-forum-post-report",this.onClickReportButton)}render(){return r.createElement(i.a,{key:this.state.postId,ref:this.reportRef,reportableId:this.state.postId,reportableType:"forum_post",user:{username:this.state.username}})}}}).call(this,n("5wds"))},pAZq:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.FancyGraph=function(){function n(){this.resize=e(this.resize,this),this.initialize=e(this.initialize,this),t(window).on("resize",this.resize),t(document).on("turbolinks:load",this.initialize)}return n.prototype.container=document.getElementsByClassName("js-fancy-graph"),n.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new FancyChart(this.container[0])},n.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},n}()}).call(this,n("5wds"))},pVrk:function(t,e,n){(function(t){window.FormPlaceholderHide=function(){function e(){t(document).on("focus",".js-form-placeholder-hide",this.onFocus),t(document).on("blur",".js-form-placeholder-hide",this.onBlur)}return e.prototype.onBlur=function(t){if(t.target._origPlaceholder)return t.target.setAttribute("placeholder",t.target._origPlaceholder),t.target._origPlaceholder=null},e.prototype.onFocus=function(t){return t.target._origPlaceholder=t.target.getAttribute("placeholder"),t.target.setAttribute("placeholder","")},e}()}).call(this,n("5wds"))},"pt+B":function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.ForumTopicTitle=function(){function n(){this.save=e(this.save,this),this.onKeyup=e(this.onKeyup,this),this.onInput=e(this.onInput,this),this.editShow=e(this.editShow,this),this.cancel=e(this.cancel,this),this.abort=e(this.abort,this),this.input=document.getElementsByClassName("js-forum-topic-title--input"),this.saveButton=document.getElementsByClassName("js-forum-topic-title--save"),this.title=document.getElementsByClassName("js-forum-topic-title--title"),this.toggleables=document.getElementsByClassName("js-forum-topic-title--toggleable"),addEventListener("turbolinks:before-cache",this.abort),t(document).on("click",".js-forum-topic-title--edit-start",this.editShow),t(document).on("click",".js-forum-topic-title--save",this.save),t(document).on("keyup",".js-forum-topic-title--input",this.onKeyup),t(document).on("click",".js-forum-topic-title--cancel",this.cancel),t(document).on("input",".js-forum-topic-title--input",this.onInput)}return n.prototype.abort=function(){var t;return null!=(t=this.xhr)?t.abort():void 0},n.prototype.cancel=function(){return this.abort(),t(this.toggleables).removeAttr("data-title-edit"),this.input[0].value=this.input[0].defaultValue},n.prototype.editShow=function(){return t(this.toggleables).attr("data-title-edit",1),this.input[0].selectionStart=this.input[0].value.length,this.input[0].focus()},n.prototype.onInput=function(){return this.saveButton[0].disabled=!osu.present(this.input[0].value)},n.prototype.onKeyup=function(t){switch(t.keyCode){case 13:return this.save();case 27:return this.cancel()}},n.prototype.save=function(){var e,n,r,i;if(n=(e=this.input[0]).value,null!=osu.presence(n))return n===e.defaultValue?this.cancel():(e.disabled=!0,this.saveButton[0].disabled=!0,this.abort(),this.xhr=t.ajax(e.dataset.url,{method:"PUT",data:(r={},r[""+e.name]=n,r)}).done((function(){return osu.reloadPage()})).fail((i=this,function(t){return e.disabled=!1,i.saveButton[0].disabled=!1,osu.emitAjaxError()(t)})))},n}()}).call(this,n("5wds"))},q7GS:function(t,e,n){"use strict";n.r(e);n("lhFD"),n("QT2p"),n("yP+D"),n("6Z8S"),n("Nqw+"),n("vqYE"),n("TgbU"),n("bTZw"),n("y0Iw"),n("YEnZ"),n("VAqo"),n("FLFi"),n("PBOi"),n("6FbF"),n("wuZa"),n("exjS"),n("E+Th"),n("pAZq"),n("xHv7"),n("sWOL"),n("Kd0U"),n("pVrk"),n("t+h0"),n("byFe"),n("jepR"),n("JER7"),n("ICEo"),n("6TQG"),n("pt+B"),n("o5lo"),n("E/7X"),n("tTWz"),n("Y4VH"),n("+3o9"),n("L6Lm"),n("WK7C"),n("icRW"),n("UaOV"),n("U4GN"),n("auMk"),n("MRAD"),n("LgLm"),n("MWnb"),n("Q9e0"),n("5ASV"),n("EhQP"),n("JXhK"),n("gfK4"),n("WHzX"),n("IBdx"),n("9put"),n("Ny+b");var r=n("/DQ7"),i=function(t,e){return function(){return t.apply(e,arguments)}};window.TwitchPlayer=function(){function t(t){this.turbolinksReload=t,this.openPlayer=i(this.openPlayer,this),this.noCookieDiv=i(this.noCookieDiv,this),this.start=i(this.start,this),this.startAll=i(this.startAll,this),this.initializeEmbed=i(this.initializeEmbed,this),this.playerDivs=document.getElementsByClassName("js-twitch-player"),addEventListener("turbolinks:load",this.startAll)}return t.prototype.initializeEmbed=function(){var t;return null!=(t=this.turbolinksReload.load("https://player.twitch.tv/js/embed/v1.js"))?t.then(this.startAll):void 0},t.prototype.startAll=function(){var t,e,n,r,i;if(0!==this.playerDivs.length){if("undefined"==typeof Twitch||null===Twitch)return this.initializeEmbed();for(i=[],e=0,n=(r=this.playerDivs).length;e<n;e++)t=r[e],i.push(this.start(t));return i}},t.prototype.start=function(t){var e,n;if(!t.dataset.twitchPlayerStarted)return t.dataset.twitchPlayerStarted=!0,e={width:"100%",height:"100%",channel:t.dataset.channel},new Twitch.Player(t.id,e).addEventListener(Twitch.Player.PLAY,(n=this,function(){return n.openPlayer(t)}))},t.prototype.noCookieDiv=function(t){return document.querySelector(".js-twitch-player--no-cookie[data-player-id='"+t+"']")},t.prototype.openPlayer=function(t){if(t.classList.contains("hidden"))return t.classList.remove("hidden"),Object(r.b)(this.noCookieDiv(t.id))},t}();n("Os89"),n("K1Kf"),n("Go/u"),n("CFbt"),n("8DVv"),n("38ot"),n("5hXa"),n("snad");var s=n("NrCJ"),o=n("0h6b"),a=n("AOHe"),u=n("iH//"),l=n("elBb"),c=n("5b8Q");null==window.gallery&&(window.gallery=new s.a),window._exported={discussionLinkify:u.b,pageChange:c.a,pageChangeImmediate:c.b,parseJson:l.b,parseJsonNullable:l.c},null==window.laroute&&(window.laroute=o),window.StoreCheckout=a.a;n("f4vq"),n("hTA1"),n("T0kv")},qHJG:function(t,e,n){"use strict";(function(t){var r=n("0h6b"),i=n("KUml"),s=n("txhI"),o=n("f4vq"),a=n("CwFt"),u=n("/G9H"),l=n("is6n");let c=class extends u.Component{constructor(){super(...arguments),Object.defineProperty(this,"formRef",{enumerable:!0,configurable:!0,writable:!0,value:u.createRef()}),Object.defineProperty(this,"searchPath",{enumerable:!0,configurable:!0,writable:!0,value:Object(r.route)("search",null,!1)}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{open:!1}}),Object.defineProperty(this,"toggle",{enumerable:!0,configurable:!0,writable:!0,value:e=>{null!=o.a.currentUser&&(null!=e&&e.preventDefault(),this.isSearchPage?t(".js-search--input").focus():this.setState({open:!this.state.open}))}})}get isSearchPage(){return Object(l.a)().pathname===this.searchPath}componentDidUpdate(t,e){var n;!e.open&&this.state.open&&(null===(n=this.formRef.current)||void 0===n||n.focus())}render(){let t="nav2__menu-link-main nav2__menu-link-main--search";return(this.state.open||Object(l.a)().pathname===Object(r.route)("search",null,!1))&&(t+=" u-section--bg-normal"),u.createElement(u.Fragment,null,u.createElement("a",{className:t,href:Object(r.route)("search"),onClick:this.toggle},u.createElement("span",{className:"fas fa-search"})),this.renderModal())}renderModal(){return!this.state.open||this.isSearchPage?null:u.createElement(s.a,{onClose:this.toggle,visible:!0},u.createElement(a.a,{ref:this.formRef,onClose:this.toggle,worker:this.props.worker}))}};c=function(t,e,n,r){var i,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(o=(s<3?i(o):s>3?i(e,n,o):i(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}([i.b],c),e.a=c}).call(this,n("5wds"))},sWOL:function(t,e,n){(function(t,e){var n=function(t,e){return function(){return t.apply(e,arguments)}};window.FormConfirmation=function(){function r(e){this.formError=e,this.onInput=n(this.onInput,this),this.boot=n(this.boot,this),t(document).on("input",".js-form-confirmation",this.onInput)}return r.prototype.boot=function(n){var r,i,s;if(null==n.formConfirmation)return i={},e.endsWith(n.name,"_confirmation")||e.endsWith(n.name,"_confirmation]")?(s=n.name.replace(/_confirmation(]?)$/,"$1"),i.confirmation=n,i.main=t(n).closest("form").find("[name='"+s+"']")[0]):(r=n.name.replace(/(]?)$/,"_confirmation$1"),i.main=n,i.confirmation=t(n).closest("form").find("[name='"+r+"']")[0]),i.main.formConfirmation=i,i.confirmation.formConfirmation=i},r.prototype.onInput=function(t){var e,n,r,i;return e=t.currentTarget,this.boot(e),i=(n=e.formConfirmation).main.value,r=n.confirmation.value,0===i.length||0===r.length?this.formError.setOneError(n.confirmation,[]):i===r?this.formError.setOneError(n.confirmation,[]):this.formError.setOneError(n.confirmation,[osu.trans("model_validation.wrong_confirmation")])},r}()}).call(this,n("5wds"),n("Hs9Z"))},sebX:function(t,e,n){"use strict";function r(t,e){return"pt-br"===e&&(e="pt"),this._origGetPluralForm(t,e)}function i(t){return t._origGetPluralForm=t._getPluralForm,t._getPluralForm=r,t}n.d(e,"a",(function(){return i}))},snad:function(t,e,n){"use strict";(function(t,e){var r=n("is6n"),i=n("vZz4");t(document).on("click",'a[href^="#"]',(function(t){var n,r,i,s;if("collapse"!==(r=t.currentTarget).dataset.toggle&&(n=r.href,""!==(s=decodeURIComponent(n.slice(n.indexOf("#")+1)))&&null!=(i=document.getElementById(s))))return t.preventDefault(),e.controller.advanceHistory(n),i.scrollIntoView()})),e.HttpRequest.prototype.requestLoaded=function(){return this.endRequest((t=this,function(){var e,n;return 200<=(e=t.xhr.status)&&e<300||401===(n=t.xhr.status)||403===n||404===n||500===n?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}));var t},e.Controller.prototype.advanceHistory=function(t){var n,i;if(t!==Object(r.a)().href)return i=this.view.getSnapshot(),n=this.lastRenderedLocation,this.cache.put(n,i.clone()),this.lastRenderedLocation=e.Location.wrap(t),this.pushHistoryWithLocationAndRestorationIdentifier(t,e.uuid())},e.Controller.prototype.replaceHistory=function(t){if(t!==Object(r.a)().href)return history.replaceState(history.state,"",t),this.lastRenderedLocation=e.Location.wrap(t)},e.Snapshot.prototype.hasAnchor=function(){return!0},e.Controller.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&Object(i.e)(t)&&Object(i.d)(t)}}).call(this,n("5wds"),n("dMdw"))},"t+h0":function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.FormToggle=function(){function n(){this.sync=e(this.sync,this),this.onChange=e(this.onChange,this),addEventListener("turbolinks:load",this.sync),t(document).on("change",".js-form-toggle--input",this.onChange)}return n.prototype.onChange=function(t){return this.toggle(t.currentTarget)},n.prototype.sync=function(){var t,e,n,r,i;for(i=[],t=0,r=(n=document.getElementsByClassName("js-form-toggle--input")).length;t<r;t++)e=n[t],i.push(this.toggle(e));return i},n.prototype.toggle=function(e){var n,r;return r=e.dataset.formToggleId,n=e.checked?"Down":"Up",t(".js-form-toggle--form[data-form-toggle-id='"+r+"']").stop()["slide"+n]()},n}()}).call(this,n("5wds"))},tTWz:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.GlobalDrag=function(){function n(){this.dragend=e(this.dragend,this),this.dragenter=e(this.dragenter,this),t(document).on("dragenter",this.dragenter),t(document).on("dragover",this.dragend)}return n.prototype.dragenter=function(){if(!this.dragging)return this.dragging=!0,t.publish("dragenterGlobal")},n.prototype.dragend=function(e){var n,r;if(this.dragging)return r=this,n=function(){return r.dragging=!1,t.publish("dragendGlobal")},Timeout.clear(this.dragendTimer),this.dragendTimer=Timeout.set(100,n)},n}()}).call(this,n("5wds"))},tX9j:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return s}));var r=n("/G9H"),i=n("XPyy");class s extends r.PureComponent{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:{user:this.props.user}}),Object.defineProperty(this,"setUser",{enumerable:!0,configurable:!0,writable:!0,value:(t,e)=>{this.setState({user:e})}})}componentDidMount(){t.subscribe("store-supporter-tag:update-user",this.setUser)}componentWillUnmount(){t.unsubscribe("store-supporter-tag:update-user",this.setUser)}render(){return r.createElement(i.a,{user:this.state.user})}}}).call(this,n("5wds"))},vqYE:function(t,e,n){(function(t){var e=function(t,e){return function(){return t.apply(e,arguments)}};window.AccountEditBlocklist=function(){function n(){this.toggle=e(this.toggle,this),this.updateBlockCount=e(this.updateBlockCount,this),t(document).on("click",this.jsClass,this.toggle),t.subscribe("user:update",this.updateBlockCount)}return n.prototype.element="block-list__content",n.prototype.jsClass=".js-account-edit-blocklist",n.prototype.updateBlockCount=function(){var e,n;if(null!=currentUser.id)return t(this.jsClass+"-count").text(osu.trans("users.blocks.blocked_count",{count:null!=(e=null!=(n=currentUser.blocks)?n.length:void 0)?e:0}))},n.prototype.toggle=function(e){var n;return e.preventDefault(),t("."+this.element).toggleClass("hidden"),n=t("."+this.element).hasClass("hidden")?osu.trans("common.buttons.show"):osu.trans("common.buttons.hide"),t(this.jsClass).text(n)},n}()}).call(this,n("5wds"))},wuZa:function(t,e,n){"use strict";(function(t,e){var r=n("Hs9Z"),i=n("lv9K"),s=n("f4vq"),o=function(t,e){return function(){return t.apply(e,arguments)}};window.CurrentUserObserver=function(){function n(){var n;this.updateFollowUserMapping=o(this.updateFollowUserMapping,this),this.setData=o(this.setData,this),this.setCovers=o(this.setCovers,this),this.setAvatars=o(this.setAvatars,this),this.reinit=o(this.reinit,this),this.covers=document.getElementsByClassName("js-current-user-cover"),this.avatars=document.getElementsByClassName("js-current-user-avatar"),this.throttledReinit=t.throttle(this.reinit,100),e.subscribe("user:update",this.setData),e(document).on("turbolinks:load",this.reinit),e.subscribe("osu:page:change",this.throttledReinit),e.subscribe("user:followUserMapping:update",this.updateFollowUserMapping),e((n=this,function(){return Object(i.t)((function(){var t;return null!=(t=s.a.currentUser)?t.cover.url:void 0}),n.setCovers)}))}return n.prototype.reinit=function(){return this.setAvatars(),this.setSentryUser()},n.prototype.setAvatars=function(t){var e,n,r,i,s;for(null==t&&(t=this.avatars),null!=currentUser.id&&(e=osu.urlPresence(currentUser.avatar_url)),s=[],r=0,i=t.length;r<i;r++)n=t[r],s.push(n.style.backgroundImage=e);return s},n.prototype.setCovers=function(){var t,e,n,r,i,o;for(null!=s.a.currentUser&&(t=osu.urlPresence(s.a.currentUser.cover.url)),o=[],n=0,r=(i=this.covers).length;n<r;n++)e=i[n],o.push(e.style.backgroundImage=t);return o},n.prototype.setData=function(t,e){return window.currentUser=e,this.reinit()},n.prototype.setSentryUser=function(){if("undefined"!=typeof Sentry&&null!==Sentry)return Sentry.configureScope((function(t){return t.setUser({id:currentUser.id,username:currentUser.username})}))},n.prototype.updateFollowUserMapping=function(t,n){return n.following?currentUser.follow_user_mapping.push(n.userId):Object(r.pull)(currentUser.follow_user_mapping,n.userId),s.a.currentUser.follow_user_mapping=currentUser.follow_user_mapping,e.publish("user:followUserMapping:refresh")},n}()}).call(this,n("Hs9Z"),n("5wds"))},xHv7:function(t,e,n){(function(t){window.FormClear=function(){function e(){t(document).on("ajax:success",".js-form-clear",this.clear)}return e.prototype.clear=function(t){return t.currentTarget.reset()},e}()}).call(this,n("5wds"))},y0Iw:function(t,e,n){"use strict";(function(t,e){var r=n("is6n"),i=n("vZz4");window.BeatmapDiscussionHelper=function(){function n(){}return n.DEFAULT_BEATMAP_ID="-",n.DEFAULT_MODE="timeline",n.DEFAULT_FILTER="total",n.MAX_MESSAGE_PREVIEW_LENGTH=100,n.MAX_LENGTH_TIMELINE=750,n.TIMESTAMP_REGEX=/\b(((\d{2,}):([0-5]\d)[:.](\d{3}))(\s\((?:\d+[,|])*\d+\))?)/,n.MODES=new Set(["events","general","generalAll","timeline","reviews"]),n.FILTERS=new Set(["deleted","hype","mapperNotes","mine","pending","praises","resolved","total"]),n.canModeratePosts=function(t){return null==t&&(t=currentUser),t.is_admin||t.is_moderator},n.discussionMode=function(t){return"review"===t.message_type?"reviews":null!=t.beatmap_id?null!=t.timestamp?"timeline":"general":"generalAll"},n.format=function(e,r){var i,s,o,a,u,l,c;for(null==r&&(r={}),s="beatmapset-discussion-message",e=(e=t.escape(e)).trim(),e=_exported.discussionLinkify(e),e=n.linkTimestamp(e,["beatmap-discussion-timestamp-decoration"]),(null==(u=r.newlines)||u)&&(e=e.split("\n").map((function(t){return t.trim()})).join("<br>").replace(/(?:<br>){2,}/g,"<br><br>")),i=s,o=0,a=(c=null!=(l=r.modifiers)?l:[]).length;o<a;o++)i+=" "+s+"--"+c[o];return"<div class='"+i+"'>"+e+"</div>"},n.formatTimestamp=function(e){var n,r,i;if(null!=e)return r=e%1e3,i=Math.floor(e/1e3)%60,n=Math.floor(e/1e3/60),t.padStart(n,2,0)+":"+t.padStart(i,2,0)+"."+t.padStart(r,3,0)},n.linkTimestamp=function(t,e){return null==e&&(e=[]),t.replace(/\b((\d{2}):(\d{2})[:.](\d{3})( \([\d,|]+\)|\b))/g,(function(t,n,r,s,o,a){return Object(i.f)(Object(i.h)(r+":"+s+":"+o+(null!=a?a:"")),n,{classNames:e})}))},n.nearbyDiscussions=function(n,r){var i,s,o,a,u,l,c,h,d,p,f,m;if(null==r)return[];for(l={},a=0,u=n.length;a<u;a++)!(s=n[a]).timestamp||"suggestion"!==(c=s.message_type)&&"problem"!==c||(o=Math.abs(s.timestamp-r))>5e3||s.user_id===currentUser.id&&e(s.updated_at).diff(e(),"hour")>-24||(null==l[i=function(){switch(!1){case 0!==o:return"d0";case!(o<100):return"d100";case!(o<1e3):return"d1000";default:return"other"}}()]&&(l[i]=[]),l[i].push(s));return m=null!=(h=null!=(d=null!=(p=null!=(f=l.d0)?f:l.d100)?p:l.d1000)?d:l.other)?h:[],t.sortBy(m,"timestamp")},n.previewMessage=function(e){return e.length>n.MAX_MESSAGE_PREVIEW_LENGTH?t.chain(e).truncate({length:n.MAX_MESSAGE_PREVIEW_LENGTH}).escape().value():n.format(e,{newlines:!1})},n.stateFromDiscussion=function(t){var e;return null==t?{}:{discussionId:t.id,beatmapsetId:t.beatmapset_id,beatmapId:null!=(e=t.beatmap_id)?e:n.DEFAULT_BEATMAP_ID,mode:n.discussionMode(t)}},n.parseTimestamp=function(t){var e,r;return null==t?null:null!=(r=t.match(n.TIMESTAMP_REGEX))?1e3*(60*(e=r.slice(1).map((function(t){return parseInt(t,10)})))[2]+e[3])+e[4]:void 0},n.url=function(e,r){var i,s,o,a,u,l,c,h,d,p,f,m,g,v,b;return null==e&&(e={}),null==r&&(r=!1),o=(m=r?t.assign(n.urlParse(),e):e).beatmapsetId,s=m.beatmapId,i=m.beatmap,d=m.mode,h=m.filter,u=m.discussionId,c=m.discussions,a=m.discussion,f=m.post,b=m.user,p={},null!=i&&(o=i.beatmapset_id,s=i.id),p.beatmapset=o,p.mode=null!=d?d:n.DEFAULT_MODE,p.beatmap=null==s||"events"===(g=p.mode)||"generalAll"===g||"reviews"===g?n.DEFAULT_BEATMAP_ID:s,null!=h&&h!==n.DEFAULT_FILTER&&"events"!==p.mode&&(p.filter=h),null!=a&&(u=a.id),null!=u&&(null==a&&null!=c&&(a=t.find(c,{id:u})),null!=a&&(null!=a&&(l=n.stateFromDiscussion(a)),p.beatmapset=l.beatmapsetId,p.beatmap=l.beatmapId,p.mode=l.mode)),v=new URL(laroute.route("beatmapsets.discussion",p)),null!=u&&(v.hash="/"+u,null!=f&&(v.hash+="/"+f.id)),null!=b?v.searchParams.set("user",b):v.searchParams.delete("user"),v.toString()},n.urlParse=function(e,i,s){var o,a,u,l,c,h,d,p,f,m,g,v,b,y,w;if(null==s&&(s={}),null==s.forceDiscussionId&&(s.forceDiscussionId=!1),(m=(w=new URL(null!=e?e:Object(r.a)().href)).pathname.split(/\/+/))[0],d=m[1],a=m[2],p=m[3],o=m[4],h=m[5],c=m[6],"beatmapsets"===d&&"discussion"===p){if(a=parseInt(a,10),o=parseInt(o,10),y={beatmapsetId:isFinite(a)?a:void 0,beatmapId:isFinite(o)?o:void 0,mode:n.MODES.has(h)?h:n.DEFAULT_MODE,filter:n.FILTERS.has(c)?c:n.DEFAULT_FILTER,user:null!=w.searchParams.get("user")?parseInt(w.searchParams.get("user"),10):void 0},"/"===w.hash[1]&&(l=(g=w.hash.slice(2).split("/").map((function(t){return parseInt(t,10)})))[0],f=g[1],isFinite(l)))if(null!=i){if(u=t.find(i,{id:l}),t.assign(y,n.stateFromDiscussion(u)),(null!=(v=u.posts)&&null!=(b=v[0])?b.id:void 0)===f)return y}else s.forceDiscussionId&&(y.discussionId=l);return null!=y.discussionId&&isFinite(f)&&(y.postId=f),y}},n.validMessageLength=function(t,e){return(null!=t?t.length:void 0)>0&&(!e||t.length<=n.MAX_LENGTH_TIMELINE)},n}()}).call(this,n("Hs9Z"),n("7EfK"))},"yP+D":function(t,e,n){"use strict";(function(t,e,r){var i=n("is6n"),s={}.hasOwnProperty;window.osu={isIos:/iPad|iPhone|iPod/.test(navigator.platform),currentUserIsFriendsWith:function(e){return t.find(currentUser.friends,{target_id:e})},groupColour:function(t){var e;return{"--group-colour":null!=(e=null!=t?t.colour:void 0)?e:"initial"}},setHash:function(t){var e,n;if(n=(e=Object(i.a)().href).replace(/#.*/,""),(n+=t)!==e)return history.replaceState(history.state,null,n)},ajaxError:function(t){if(!osuCore.userLogin.showOnError(t)&&!osuCore.userVerification.showOnError(t))return osu.popup(osu.xhrErrorMessage(t),"danger")},emitAjaxError:function(t){return null==t&&(t=document.body),function(n,r,i){return e(t).trigger("ajax:error",[n,r,i])}},isInputElement:function(t){var e;return"INPUT"===(e=t.tagName)||"SELECT"===e||"TEXTAREA"===e||t.isContentEditable},isClickable:function(t){var e;return!(!osu.isInputElement(t)&&"A"!==(e=t.tagName)&&"BUTTON"!==e)||!!t.parentNode&&osu.isClickable(t.parentNode)},focus:function(t){var n;return t=e(t)[0],osu.isIos?(n=t.style.fontSize,t.style.fontSize="16px",t.focus(),t.style.fontSize=n):t.focus()},formatBytes:function(t,e){var n,r;return null==e&&(e=2),r=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],1e3,t<1e3?t+" B":(n=Math.floor(Math.log(t)/Math.log(1e3)),osu.formatNumber(t/Math.pow(1e3,n),e)+" "+r[n])},formatNumber:function(t,e,n,r){return null==t?null:(null==n&&(n={}),null!=e&&(n.minimumFractionDigits=e,n.maximumFractionDigits=e),t.toLocaleString(null!=r?r:currentLocale,n))},reloadPage:function(t){return null==t&&(t=!0),e(document).off(".ujsHideLoadingOverlay"),r.clearCache(),osu.navigate(Object(i.a)().href,t,{action:"replace"})},urlPresence:function(t){return osu.present(t)?'url("'+String(t).replace(/"/g,"%22")+'")':null},navigate:function(t,e,n){var i,s;return i=null!=(s=(null!=n?n:{}).action)?s:"advance",e&&osu.keepScrollOnLoad(),r.visit(t,{action:i})},keepScrollOnLoad:function(){var t;return t=[window.pageXOffset,window.pageYOffset],e(document).one("turbolinks:load",(function(){return window.scrollTo(t[0],t[1])}))},popup:function(t,n){var r,i,s,o;return null==n&&(n="info"),i=e("#popup-container"),o=function(){return r.click()},(r=e(".popup-clone").clone()).addClass("alert-"+n+" popup-active").removeClass("popup-clone"),r.find(".popup-text").html(t),"warning"===n||"danger"===n?e("#overlay").off("click.close-alert").one("click.close-alert",o).fadeIn():Timeout.set(5e3,o),"function"==typeof(s=document.activeElement).blur&&s.blur(),r.appendTo(i).fadeIn()},popupShowing:function(){return e("#overlay").is(":visible")},presence:function(t){return osu.present(t)?t:null},present:function(t){return null!=t&&""!==t},promisify:function(t){return new Promise((function(e,n){return t.done(e).fail(n)}))},trans:function(t,e,n){return null==e&&(e={}),osu.transExists(t,n)||(n=fallbackLocale),Lang.get(t,e,n)},transArray:function(e,n){switch(null==n&&(n="common.array_and"),e.length){case 0:return"";case 1:return""+e[0];case 2:return e.join(osu.trans(n+".two_words_connector"));default:return""+e.slice(0,-1).join(osu.trans(n+".words_connector"))+osu.trans(n+".last_word_connector")+t.last(e)}},transChoice:function(t,e,n,r){var i,s;return null==n&&(n={}),null==r&&(r=currentLocale),(i=r===fallbackLocale)||osu.transExists(t,r)?(n.count_delimited=osu.formatNumber(e,null,null,r),s=Lang.choice(t,e,n,r),i||null!=s?s:(delete n.count,osu.transChoice(t,e,n,fallbackLocale))):osu.transChoice(t,e,n,fallbackLocale)},transExists:function(t,e){var n;return n=Lang.get(t,null,e),osu.present(n)&&n!==t},uuid:function(){return r.uuid()},xhrErrorMessage:function(t){var e,n,r,i,o,a,u,l,c;if(null!=(c=null!=t&&null!=(a=t.responseJSON)?a.validation_error:void 0)){for(e in n=[],c)s.call(c,e)&&(i=c[e],n=n.concat(i));o=n.join(", ")+"."}return null==o&&(o=null!=t&&null!=(u=t.responseJSON)?u.error:void 0),null==o&&(o=null!=t&&null!=(l=t.responseJSON)?l.message:void 0),null!=o&&""!==o||(r="errors.codes.http-"+(null!=t?t.status:void 0),(o=osu.trans(r))===r&&(o=osu.trans("errors.unknown"))),o}}}).call(this,n("Hs9Z"),n("5wds"),n("dMdw"))},zaxE:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return u}));var r,i=n("/G9H"),s=n("I8Ok"),o=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i.createElement,r="countdown-timer";var u=function(e){function n(e){var r;this.render=o(this.render,this),this.updateTimer=o(this.updateTimer,this),n.__super__.constructor.call(this,e),r=t(this.props.deadline),this.state={deadline:r,diff:Math.max(r.diff(),0)}}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype}(n,e),n.prototype.componentDidMount=function(){return this.timer=setInterval(this.updateTimer,1e3)},n.prototype.componentWillUnmount=function(){return clearInterval(this.timer)},n.prototype.updateTimer=function(){var t;return 0===(t=Math.max(this.state.deadline.diff(),0))&&clearInterval(this.timer),this.setState({diff:t})},n.prototype.render=function(){var t,e,n,i;return t=this.state.diff/1e3,n={days:Math.floor(t/86400),hours:Math.floor(t/3600%24),minutes:Math.floor(t/60%60),seconds:Math.floor(t%60)},Object(s.div)({className:r},Object(s.div)({className:r+"__header"},osu.trans("common.time.remaining")+":"),function(){var t;for(e in t=[],n)i=n[e],t.push(Object(s.div)({key:e,className:r+"__field"},Object(s.div)({className:r+"__digit"},i<10?"0"+i:i),Object(s.div)({className:r+"__label"},osu.trans("common.countdown."+e))));return t}())},n}(i.Component)}).call(this,n("7EfK"))},zzf1:function(t,e,n){"use strict";n.r(e)}},[[0,1,2,0]]]);
//# sourceMappingURL=app.fdd96eda.js.map